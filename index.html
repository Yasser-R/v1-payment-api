<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <title>Dwolla API Docs</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="javascripts/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["json","php","ruby","python","js"]);
        });
      </script>
  </head>

  <body class="index">
    <div class="tocify-wrapper">
      <img class="logo" src="images/logo.png" />
        <div class="search">
          <input type="text" class="search" id="input-search">
        </div>
        <div class="search-info"></div>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.dwolla.com/applications/create' target="_blank">Get API Credentials</a></li>
            <li><a href='https://sandbox.uat.dwolla.com/' target="_blank">Sandbox Admin</a></li>
            <li><a href='http://github.com/tripit/slate' target="_blank">Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="introduction">Introduction</h1>
<pre class="highlight plaintext">  _          _ _             
 | |__   ___| | | ___        
 | '_ \ / _ \ | |/ _ \       
 | | | |  __/ | | (_) |      
 |_| |_|\___|_|_|\___/     _ 
 __      _____  _ __| | __| |
 \ \ /\ / / _ \| '__| |/ _` |
  \ V  V / (_) | |  | | (_| |
   \_/\_/ \___/|_|  |_|\__,_|

</pre>

<p>Welcome to the Dwolla API docs. This is a listing of all publically available endpoints which allow developers to modify their accounts, process transactions, find other users, and modify funding sources. All endpoints are listed in the sidebar to the left. </p>

<p>Example requests are available in JSON, PHP, Ruby, Python, and Node.js in the dark area to the right. JSON is shown by default, however, the tabs in the top right can be used to switch the language in which the examples are displayed in.</p>

<h2 id="helper-libraries">Helper Libraries</h2>
<pre class="highlight plaintext">We'll you show sample code on this pane!
</pre>
<pre class="highlight plaintext">Quote of the day:

&lt;erno&gt; hm. I've lost a machine.. literally _lost_. it responds to ping, it works completely, I just can't figure out where in my apartment it is.

</pre>

<p>A handful of libraries are officially maintained, and others are community maintained.</p>

<ul>
<li>PHP: <a href="https://github.com/Dwolla/dwolla-php">dwolla-php</a></li>
<li>Ruby: <a href="https://github.com/Dwolla/dwolla-ruby">dwolla-ruby</a></li>
<li>Python: <a href="https://github.com/Dwolla/dwolla-python">dwolla-python</a></li>
<li>Node.JS: <a href="https://github.com/Dwolla/dwolla-node">dwolla-node</a></li>
<li>Java: <a href="https://github.com/Dwolla/dwolla-java">dwolla-java</a></li>
<li>Clojure: <a href="https://github.com/Dwolla/dwolla-clojure">dwolla-clojure</a></li>
<li>Scala: <a href="https://github.com/Dwolla/dwolla-scala">dwolla-scala</a></li>
<li>Windows 8 SDK

<ul>
<li><a href="http://www.nuget.org/packages/Dwolla.InAppSDKWP8/">Phone</a></li>
<li><a href="http://www.nuget.org/packages/Dwolla.InAppSDK/">XAML</a></li>
<li><a href="http://www.nuget.org/packages/Dwolla.InAppSDK.JS/">JS</a></li>
</ul></li>
<li>iOS: <a href="https://github.com/Dwolla/dwolla-ios">dwolla-ios</a></li>
<li>OS X Cocoa: <a href="https://github.com/Dwolla/dwolla-cocoa">dwolla-cocoa</a></li>
<li>Perl: <a href="http://search.cpan.org/dist/WebService-Dwolla/">WebService-Dwolla</a></li>
<li>C# / .NET: <a href="https://github.com/justinsoliz/dwolla.net">dwolla.net</a></li>
</ul>

<h2 id="making-requests">Making Requests</h2>
<pre class="highlight plaintext">POST https://www.dwolla.com/oauth/rest/transactions/send
Content-Type: application/json

{
    amount: 15.23,
    destinationId: 'gordon@dwolla.com',
    destinationType: 'Email',
    pin: 1234
}
</pre>
<pre class="highlight plaintext">...

GET https://www.dwolla.com/oauth/rest/transactions?client_id=XYZ&amp;client_secret=JJJ&amp;limit=10
</pre>

<p><code class="prettyprint">POST</code> requests must have a JSON encoded body and the 
<code class="prettyprint">Content-Type: application/json</code> header.</p>

<p><code class="prettyprint">GET</code> requests have parameters provided in the querysting.</p>

<p>All requests must be made over HTTPS.  Any HTTP requests are met with a HTTP 302 to its HTTPS equivalent.</p>

<p><aside class="notice">
Remember to <a href="http://en.wikipedia.org/wiki/Percent-encoding">url-encode</a> all GET querystring parameters!
</aside></p>

<h2 id="responses">Responses</h2>

<blockquote>
<p>Happy response</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="mi">71332</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<blockquote>
<p>Unsuccessful response</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid access token."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Responses are always JSON encoded and are contained in an <em>envelope</em>.  </p>

<p>That means every API response contains: </p>

<ul>
<li><code class="prettyprint">Success</code>, a boolean indicating whether or not the call was successful, or resulted in an error</li>
<li><code class="prettyprint">Message</code>, an error message if the API call was unsuccessful, or <code class="prettyprint">&quot;Success&quot;</code> otherwise</li>
<li><code class="prettyprint">Response</code>, the actual data returned by the API call.</li>
</ul>

<!---
## Errors
-->

<h2 id="facilitator-fees">Facilitator Fees</h2>

<p>By <a href="https://developers.dwolla.com/dev/pages/guides/facilitator_fee">enabling</a> the Facilitator Fee application feature, your application can take a cut of any transactions that it facilitates.  Transactions created via the Send endpoint and  transactions resulting from an <a href="#checkouts">Off-Site Gateway</a> checkout can have a facilitator fee attached to it.  Facilitator fees can also be attached to <a href="#money-requests">Money Requests</a> created by your application.  When the Money Request is fulfilled, the facilitator fee will be paid out.</p>

<p>Facilitator fees can be up to 50% of the transaction amount and must be at least $0.01.  They do not affect the total transaction amount, and exist as a separate <a href="#transactions">Transaction</a> resource with a unique Transaction ID.</p>

<h2 id="metadata">Metadata</h2>

<p>Metadata can be supplied for Send, MassPay Items, Money Requests, Refunds, and Checkouts in the metadata property. The <code class="prettyprint">metadata</code> property is a JSON object (a collection of &ldquo;key&rdquo;: &ldquo;value&rdquo; pairs). A maximum of 10 key-value pairs can be stored. Keys and values must be strings of maximum length 255 characters.</p>
<pre class="highlight plaintext">{
    "Shipment ID": "d289e89ej893r3r",
    "TShirtSize": "Small",
    "DeliveryOption": "Rush Shipping",
    "InvoiceDate": "12-06-2014",
    "Priority": "High",
    "blah": "blah"
}
</pre>

<h3 id="visibility-/-access">Visibility / Access</h3>

<p>Metadata is intended as an expansion of the existing <code class="prettyprint">notes</code> field (a string of max length 255), in order to allow applications to store more data with resources.</p>

<p>Unlike the <code class="prettyprint">notes</code> field, which is visible to:</p>

<ol>
<li>the application that created the transaction</li>
<li>the recipient and sender of the transaction (through the Dwolla.com dashboard)</li>
<li>any future applications that view the transaction</li>
</ol>

<p><code class="prettyprint">metadata</code> is only visible to the application that created the transaction. No other application, nor the sender or receiver may access the metadata field.</p>

<h3 id="warnings">Warnings</h3>

<p>Currently, there are 2 bugs we are aware of:</p>

<ol>
<li>If an metadata collection contains two duplicate keys, a HTTP 500 XML response will be thrown instead of a proper error response.</li>
<li>Keys which start with a number or symbol (ex. &ldquo;10&rdquo;, &ldquo;10abc&rdquo;, &ldquo;$abc&rdquo;) are rejected.</li>
</ol>

          <h1 id="authentication">Authentication</h1>

<blockquote>
<p>You&rsquo;ll need to provide your Application key and secret when you initialize our libraries.</p>
</blockquote>
<pre class="highlight javascript"><span class="kd">var</span> <span class="nx">Dwolla</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'dwolla'</span><span class="p">)(</span><span class="s2">"key here"</span><span class="p">,</span> <span class="s2">"secret here"</span><span class="p">);</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">setToken</span><span class="p">(</span><span class="s2">"token goes here"</span><span class="p">);</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'dwolla'</span>

<span class="c1"># set API keys</span>
<span class="no">Dwolla</span><span class="o">::</span><span class="n">api_key</span> <span class="o">=</span> <span class="s2">"blahblahblah"</span>
<span class="no">Dwolla</span><span class="o">::</span><span class="n">api_secret</span> <span class="o">=</span> <span class="s2">"shhhhhh"</span>

<span class="c1"># set an OAuth access token</span>
<span class="no">Dwolla</span><span class="o">::</span><span class="n">token</span> <span class="o">=</span> <span class="s2">"JRRTolkien"</span>
</pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'dwolla.php'</span><span class="p">;</span>

<span class="c1">// Instantiate a new Dwolla REST Client
</span><span class="nv">$Dwolla</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DwollaRestClient</span><span class="p">(</span><span class="s2">"key goes here"</span><span class="p">,</span> <span class="s2">"secret goes here"</span><span class="p">);</span>

<span class="c1">// Set an OAuth access token:
</span><span class="nv">$Dwolla</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="s2">"token goes here"</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</pre>
<pre class="highlight python"><span class="kn">from</span> <span class="nn">dwolla</span> <span class="kn">import</span> <span class="n">DwollaClientApp</span><span class="p">,</span> <span class="n">DwollaUser</span>

<span class="c"># Instantiate a new Dwolla client</span>
<span class="n">Dwolla</span> <span class="o">=</span> <span class="n">DwollaClientApp</span><span class="p">(</span><span class="s">"key goes here"</span><span class="p">,</span> <span class="s">"secret goes here"</span><span class="p">)</span>

<span class="c"># set an OAuth access token</span>
<span class="n">DwollaUser</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="p">(</span><span class="s">"token goes here"</span><span class="p">)</span>
</pre>

<p>To interact with the API, you will need API keys.  <a href="https://www.dwolla.com/applications/create">Create a consumer application</a> in order to get an Application <code class="prettyprint">key</code> and <code class="prettyprint">secret</code>.</p>

<p>Some API endpoints only require your application <code class="prettyprint">key</code> and <code class="prettyprint">secret</code> (for instance, <a href="#create-a-checkout">creating a checkout</a> or <a href="#lookup-user">looking up a user</a>), but most require an OAuth <code class="prettyprint">access_token</code>.</p>

<p>For endpoints that require an OAuth access token, it should be included in the Authorization HTTP header like so:</p>

<p><code class="prettyprint">Authorization: Bearer &lt;T0K3N_H3R3&gt;</code></p>

<p><aside class="notice">
Needless to say, you should replace <code class="prettyprint">&lt;T0K3N_H3R3&gt;</code> with an OAuth <code class="prettyprint">access_token</code>!
</aside></p>

          <h1 id="oauth">OAuth</h1>
<pre class="highlight plaintext">  /$$$$$$   /$$$$$$              /$$     /$$      
 /$$__  $$ /$$__  $$            | $$    | $$      
| $$  \ $$| $$  \ $$ /$$   /$$ /$$$$$$  | $$$$$$$ 
| $$  | $$| $$$$$$$$| $$  | $$|_  $$_/  | $$__  $$
| $$  | $$| $$__  $$| $$  | $$  | $$    | $$  \ $$
| $$  | $$| $$  | $$| $$  | $$  | $$ /$$| $$  | $$
|  $$$$$$/| $$  | $$|  $$$$$$/  |  $$$$/| $$  | $$
 \______/ |__/  |__/ \______/    \___/  |__/  |__/                                                          

</pre>

<p>Dwolla&rsquo;s API lets you interact with a user&rsquo;s Dwolla account and act on its behalf to send money, request money, and more.  To do so, your application first needs to request authorization from users.  </p>

<p>Dwolla implements the <a href="http://oauth.net/2/">OAuth 2.0 standard</a> to facilitate this authorization. Similar to Facebook and Twitter&rsquo;s authentication flow, the user is first presented with a permission dialog for your application, at which point the user can either approve the permissions requested, or reject them. Once the user approves, an <code class="prettyprint">authorization_code</code> is sent to your application, which will then <a href="#finish-authorization">be exchanged</a> for an <code class="prettyprint">access_token</code> and a <code class="prettyprint">refresh_token</code> pair. </p>

<p>The <code class="prettyprint">access_token</code> can then be used to make API calls which require user authentication like <a href="#send-money">Send</a> or <a href="#list-a-user's-transactions">List Transactions</a>. </p>

<h3 id="token-lifetimes">Token lifetimes</h3>

<p><strong>Access tokens</strong> are <em>short lived</em>: 1 hour.</p>

<p><strong>Refresh tokens</strong> are <em>long lived</em>: 60 days.</p>

<p>A refresh token can be used within 60 days to generate a new access_token and refresh_token pair.  So long as you <a href="#refresh-authorization">refresh your authorization</a> at least every 60 days, your application can maintain authorization indefinitely without requiring the user to re-authorize.</p>

<h2 id="request-authorization">Request Authorization</h2>

<blockquote>
<p>Example initiation URL:</p>
</blockquote>
<pre class="highlight plaintext">https://www.dwolla.com/oauth/v2/authenticate?client_id=abcdefg&amp;response_type=code&amp;redirect_uri=https%3A%2F%2Fwww.myredirect.com%2Fredirect&amp;scope=send|transactions
</pre>

<p>To start the OAuth process, construct the initiation URL which the user will visit in order to grant permission to your application.  It describes the permissions your application requires (<code class="prettyprint">scope</code>), who the client application is (<code class="prettyprint">client_id</code>), and where the user should be redirected to after they grant or deny permissions to your application (<code class="prettyprint">redirect_uri</code>).</p>

<h3 id="url-format:">URL Format:</h3>

<p><code class="prettyprint">
https://www.dwolla.com/oauth/v2/authenticate?client_id={client_id}&amp;response_type=code&amp;redirect_uri={redirect_uri}&amp;scope={scope}
</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>Application key</td>
</tr>
<tr>
<td>response_type</td>
<td>This must always be set to <code class="prettyprint">code</code></td>
</tr>
<tr>
<td>redirect_uri</td>
<td>URL where the user will be redirected to afterwards</td>
</tr>
<tr>
<td>scope</td>
<td>Permissions you are requesting.  See <a href="#oauth-scopes">below</a> for list of available scopes.  Scopes are delimited by a pipe (&ldquo;&#124;&rdquo;)</td>
</tr>
</tbody></table>

<p><aside class="notice">
Remember to url-encode all querystring parameters!
</aside></p>

<h3 id="oauth-scopes">OAuth Scopes</h3>

<p>Applications may request the following permission scopes when generating an access token:</p>

<table><thead>
<tr>
<th>Scope Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>AccountInfoFull</td>
<td>Access detailed account profile</td>
</tr>
<tr>
<td>Contacts</td>
<td>Access the user&rsquo;s contacts</td>
</tr>
<tr>
<td>Transactions</td>
<td>Access the user&rsquo;s transaction data</td>
</tr>
<tr>
<td>Balance</td>
<td>Access the user&rsquo;s Dwolla account balance</td>
</tr>
<tr>
<td>Send</td>
<td>Send money on the user&rsquo;s behalf</td>
</tr>
<tr>
<td>Request</td>
<td>Send money requests, list them, fulfill them</td>
</tr>
<tr>
<td>Funding</td>
<td>Access the user&rsquo;s funding sources (i.e. connected bank accounts)</td>
</tr>
<tr>
<td>ManageAccount</td>
<td>Manage the user&rsquo;s account settings</td>
</tr>
</tbody></table>

<h2 id="finish-authorization">Finish Authorization</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JCGQXLrlfuOqdUYdTcLz3rBiCZQDRvdWIUPkw++GMuGhkem9Bo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"g7QLwvO37aN2HoKx1amekWi8a2g7AIuPbD5C/JSLqXIcDOxfTr"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"h6TvQZH+5BsV//O43uOJ0uRkBLk="</span><span class="p">,</span><span class="w">
  </span><span class="s2">"grant_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authorization_code"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"redirect_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.myredirect.com/redirect"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<blockquote>
<p>Successful Response:</p>
</blockquote>
<pre class="highlight plaintext">{
    "access_token": "YLAZSreh165CAD2tPhAEzFCYYIrVyFomLWUDMGFBZIw9KtIg4q",
    "expires_in": 35,
    "refresh_token": "Pgk+l9okjwTCfsvIvEDPrsomE1er1txeyoaAkTIBAuXza8WvZY",
    "refresh_expires_in": 5184000,
    "token_type": "bearer"
}
</pre>

<p>Once the user returns to your application via the <code class="prettyprint">redirect_uri</code> you specified, there will be a <code class="prettyprint">code</code> querystring parameter appended to that URL.  Exchange the authorization <code class="prettyprint">code</code> for an <code class="prettyprint">access_token</code> and <code class="prettyprint">refresh_token</code> pair.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/v2/token</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>Application key</td>
</tr>
<tr>
<td>client_secret</td>
<td>Application secret</td>
</tr>
<tr>
<td>code</td>
<td>The authorization code included in the redirect URL</td>
</tr>
<tr>
<td>grant_type</td>
<td>This must be set to <code class="prettyprint">authorization_code</code></td>
</tr>
<tr>
<td>redirect_uri</td>
<td>The same redirect_uri specified in the intiation step</td>
</tr>
</tbody></table>

<h3 id="response-parameters">Response Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>A new access token with requested scopes</td>
</tr>
<tr>
<td>expires_in</td>
<td>The lifetime of the access token, in seconds.  Default is 3600.</td>
</tr>
<tr>
<td>refresh_token</td>
<td>New refresh token</td>
</tr>
<tr>
<td>refresh_expires_in</td>
<td>The lifetime of the refresh token, in seconds.  Default is 5184000.</td>
</tr>
<tr>
<td>token_type</td>
<td>Always <code class="prettyprint">bearer</code>.</td>
</tr>
</tbody></table>

<h2 id="refresh-authorization">Refresh Authorization</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JCGQXLrlfuOqdUYdTcLz3rBiCZQDRvdWIUPkw++GMuGhkem9Bo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"g7QLwvO37aN2HoKx1amekWi8a2g7AIuPbD5C/JSLqXIcDOxfTr"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pgk+l9okjwTCfsvIvEDPrsomE1er1txeyoaAkTIBAuXza8WvZY"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"grant_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh_token"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<blockquote>
<p>Successful Response:</p>
</blockquote>
<pre class="highlight plaintext">{
    "access_token": "hr1tSJk23tOv9RxR8cQuDpUD/kpUgf0cb9WfKtRoPxTw8ymbVt",
    "expires_in": 3600,
    "refresh_token": "lqopeyjq5AJln5fpMedElUULz+XBNNw9nAkIinxE0g4aEzxmDc",
    "refresh_expires_in": 5184000,
    "token_type": "bearer"
}
</pre>

<p>Use a valid <code class="prettyprint">refresh_token</code> to generate a new <code class="prettyprint">access_token</code> and <code class="prettyprint">refresh_token</code> pair.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/v2/token</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>Application key</td>
</tr>
<tr>
<td>client_secret</td>
<td>Application secret</td>
</tr>
<tr>
<td>refresh_token</td>
<td>A valid refresh token</td>
</tr>
<tr>
<td>grant_type</td>
<td>This must be set to <code class="prettyprint">refresh_token</code></td>
</tr>
</tbody></table>

<h3 id="response-parameters">Response Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>A new access token with requested scopes</td>
</tr>
<tr>
<td>expires_in</td>
<td>The lifetime of the access token, in seconds.  Default is 3600.</td>
</tr>
<tr>
<td>refresh_token</td>
<td>New refresh token</td>
</tr>
<tr>
<td>refresh_expires_in</td>
<td>The lifetime of the refresh token, in seconds.  Default is 5184000.</td>
</tr>
<tr>
<td>token_type</td>
<td>Always <code class="prettyprint">bearer</code>.</td>
</tr>
</tbody></table>

          <h1 id="webhooks">Webhooks</h1>

<p><a href="https://developers.dwolla.com/dev/pages/guides/using_webhooks">Webhook notifications</a> are used to notify your application when particular events occur relating to Transactions or Requests that your application facilitated / created.  There are four kinds of webhook notifications:</p>

<ul>
<li>TransactionStatus</li>
<li>TransactionReturned</li>
<li>RequestFulfilled</li>
<li>RequestCancelled</li>
</ul>

<p>Webhook notifications are JSON-encoded POST requests, and will contain the <code class="prettyprint">Content-Type: application/json</code> header.  There is currently no way to retrieve past Webhook notifications.</p>

<h3 id="security">Security</h3>
<pre class="highlight javascript">
<span class="kd">function</span> <span class="nx">validate_webhook_signature</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="nx">secret</span><span class="p">,</span> <span class="nx">signature</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'crypto'</span><span class="p">);</span>

  <span class="nx">hash</span> <span class="o">=</span> <span class="nx">crypto</span>
    <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s1">'sha1'</span><span class="p">,</span> <span class="nx">secret</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span><span class="nx">hash</span> <span class="o">==</span> <span class="nx">signature</span><span class="p">);</span>
<span class="p">}</span>

</pre>

<p>All webhook notifications include the <code class="prettyprint">X-Dwolla-Signature</code> header so that you can verify that it originated from Dwolla.  The signature is a SHA-1 HMAC hash of the request body, with the secret key being the application secret (<code class="prettyprint">client_secret</code>). </p>

<h2 id="transactionstatus">TransactionStatus</h2>
<pre class="highlight plaintext">POST https://www.example.com/payments/webhook
Content-Type: application/json
X-Dwolla-Signature: d0a74b17a31334edc4e6698c59e460c61bb7f21a

{
    "Id": "4444962",
    "Type": "Transaction",
    "Subtype": "Status",
    "Created": "2014-01-22T16:55:04Z",
    "Triggered": "2014-01-22T16:55:04Z",
    "Value": "processed",
    "Transaction": {
        "Type": "money_sent",
        "Notes": "",
        "Fees": [],
        "Id": 4444962,
        "Source": {
            "Id": "812-687-7049",
            "Name": "Gordon Zheng",
            "Type": "Dwolla"
        },
        "Destination": {
            "Id": "812-713-9234",
            "Name": "Reflector by Dwolla",
            "Type": "Dwolla"
        },
        "Amount": 0.01,
        "SentDate": "2014-01-22T16:55:04Z",
        "ClearingDate": "2014-01-22T16:55:04Z",
        "Status": "processed"
    },
    "Metadata": {
        "InvoiceDate": "12-06-2014",
        "Priority": "High",
        "TShirtSize": "Small",
        "blah": "blah"
    }

}
</pre>

<p>When the status of a Transaction that your application facilitated changes (e.g. transaction clears successfully, or fails, or is cancelled), Dwolla will send a TransactionStatus webhook.</p>

<h2 id="transactionreturned">TransactionReturned</h2>
<pre class="highlight plaintext">POST https://www.example.com/payments/webhook
Content-Type: application/json
X-Dwolla-Signature: d0a74b17a31334edc4e6698c59e460c61bb7f21a

{
    "Type": "Transaction",
    "Subtype": "Returned",
    "SenderTransactionId": "489977",
    "ReceiverTransactionId": "489978",
    "ReturnCode": "01",
    "ReturnDescription": "Insufficient Funds"
}
</pre>

<p>Notifies your application when a bank-funded transaction facilitated by your application is returned by the financial institution.</p>

<h2 id="requestfulfilled">RequestFulfilled</h2>
<pre class="highlight plaintext">POST https://www.example.com/requests/callback
Content-Type: application/json
X-Dwolla-Signature: f71c2f49a87b6d0a662f449b7dbb83a5c918e237

{
    "Id": 2254043,
    "Source": {
        "Id": "812-552-5953",
        "Name": "Gordon Zheng",
        "Type": "Dwolla"
    },
    "Destination": {
        "Id": "812-687-7049",
        "Name": "Gordon Zheng",
        "Type": "Dwolla"
    },
    "Amount": 0.0100,
    "Notes": "",
    "DateRequested": "2014-01-21T19:07:12Z",
    "Status": "Paid",
    "Transaction": {
        "RequestId": 2254043,
        "Id": 4439897,
        "Source": {
            "Id": "812-687-7049",
            "Name": "Gordon Zheng",
            "Type": "Dwolla"
        },
        "Destination": {
            "Id": "812-552-5953",
            "Name": "Ben Milne",
            "Type": "Dwolla"
        },
        "Amount": 0.01,
        "SentDate": "2014-01-21T19:07:44Z",
        "ClearingDate": "2014-01-21T19:07:44Z",
        "Status": "processed"
    },
    "DateCancelled": "",
    "SenderAssumeFee": false,
    "SenderAssumeAdditionalFees": false,
    "AdditionalFees": [],
    "Metadata": {
        "InvoiceDate": "12-06-2014",
        "Priority": "High",
        "TShirtSize": "Small",
        "blah": "blah"
    }
}
</pre>

<p>Notifies your application when a Money Request created by your application is fulfilled.</p>

<h2 id="requestcancelled">RequestCancelled</h2>

<p>Notifies your application when a Money Request created by your application is cancelled.</p>
<pre class="highlight plaintext">POST https://www.example.com/requests/callback
Content-Type: application/json
X-Dwolla-Signature: f71c2f49a87b6d0a662f449b7dbb83a5c918e237

{
    "Id": 2254042,
    "Source": {
        "Id": "812-552-5953",
        "Name": "Gordon Zheng",
        "Type": "Dwolla"
    },
    "Destination": {
        "Id": "812-687-7049",
        "Name": "Ben Milne",
        "Type": "Dwolla"
    },
    "Amount": 0.0100,
    "Notes": "",
    "DateRequested": "2014-01-21T19:06:51Z",
    "Status": "Cancelled",
    "CancelledBy": "812-687-7049",
    "DateCancelled": "2014-01-21T19:07:30Z",
    "SenderAssumeFee": false,
    "SenderAssumeAdditionalFees": false,
    "AdditionalFees": [],
    "Metadata": {
        "InvoiceDate": "12-06-2014",
        "Priority": "High",
        "TShirtSize": "Small",
        "blah": "blah"
    }
}
</pre>

          <h1 id="send-money">Send Money</h1>
<pre class="highlight php">/**
 *   Send money ($1.00) to Dwolla ID 812-734-7288
 **/
$transactionId = $Dwolla-&gt;send($pin, '812-734-7288', 1.00);
if(!$transactionId) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { echo "Send transaction ID: {$transactionId} \n"; } // Print Transaction ID
</pre>
<pre class="highlight ruby"><span class="c1">#   Send money ($1.00) to a Dwolla ID 812-626-8794</span>
<span class="n">transactionId</span> <span class="o">=</span> <span class="no">Dwolla</span><span class="o">::</span><span class="no">Transactions</span><span class="p">.</span><span class="nf">send</span><span class="p">({</span><span class="ss">:destinationId</span> <span class="o">=&gt;</span> <span class="s1">'812-626-8794'</span><span class="p">,</span> <span class="ss">:amount</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="o">.</span><span class="mo">00</span><span class="p">,</span> <span class="ss">:pin</span> <span class="o">=&gt;</span> <span class="vi">@pin</span><span class="p">})</span>
<span class="n">pp</span> <span class="n">transactionId</span>
</pre>
<pre class="highlight python"><span class="s">'''
      Send money ($1.00) to a Dwolla ID 812-626-8794
'''</span>
<span class="n">transaction</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">send_funds</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="s">'812-626-8794'</span><span class="p">,</span> <span class="n">_keys</span><span class="o">.</span><span class="n">pin</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/**
 *   Send money ($1.00) to a Dwolla ID 812-626-8794
 **/</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">cfg</span><span class="p">.</span><span class="nx">pin</span><span class="p">,</span> <span class="s1">'812-626-8794'</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
  </span><span class="s2">"destinationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gordon@dwolla.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"destinationType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pin"</span><span class="p">:</span><span class="w"> </span><span class="mi">4321</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<blockquote>
<p>If successful, you&rsquo;ll receive this response:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Send money from an authorized user&rsquo;s account to any Dwolla account ID, phone number, or e-mail address. You can send money to any phone number or email address &ndash; if the recipient doesn&rsquo;t yet have a Dwolla account, they&rsquo;ll be sent an SMS or email notifying them of the payment and prompting them to sign up to claim the funds.</p>

<p>You can optionally have the sender cover the transaction fee, if applicable, by setting <code class="prettyprint">assumeCosts</code> to <code class="prettyprint">true</code>.  By default, the recipient of the payment covers the $0.25 fee.</p>

<p>Facilitator fees allow you, as the application facilitating a payment, to take a cut up to 50% of the payment amount.  By default, the facilitator fee is sent to the application owner&rsquo;s account, but you can have them sent to other recipients by declaring additional facilitator fees in the optional <code class="prettyprint">additionalFees</code> array.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/transactions/send</code></p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Send</code> scope.</aside></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>destinationId</td>
<td>no</td>
<td>Email, Dwolla ID, or phone number of recipient.</td>
</tr>
<tr>
<td>pin</td>
<td>no</td>
<td>The PIN associated with the sender&rsquo;s account.</td>
</tr>
<tr>
<td>amount</td>
<td>no</td>
<td>Amount of funds to transfer to destination user.</td>
</tr>
<tr>
<td>destinationType</td>
<td>yes</td>
<td>Type of destination user. Defaults to &lsquo;Dwolla&rsquo;. Possible values are <code class="prettyprint">Dwolla</code>, <code class="prettyprint">Email</code>, and <code class="prettyprint">Phone</code>.</td>
</tr>
<tr>
<td>fundsSource</td>
<td>yes</td>
<td>ID of <a href="#funding-sources">funding source</a> to use for transaction (defaults to <code class="prettyprint">Balance</code>).</td>
</tr>
<tr>
<td>assumeCosts</td>
<td>yes</td>
<td>Set to <code class="prettyprint">true</code> for the fulfilling user to assume the Dwolla fee, <code class="prettyprint">false</code> for the destination user to assume the fee.</td>
</tr>
<tr>
<td>additionalFees</td>
<td>yes</td>
<td>Array of additional facilitator fee objects.  <code class="prettyprint">[{&quot;destinationId&quot;: &quot;&quot;, &quot;amount&quot;: 0.01}, ...]</code></td>
</tr>
<tr>
<td>metadata</td>
<td>yes</td>
<td>Optional JSON object of a maximum of 10 key-value pairs (each key and value must be less than 255 characters).  <a href="#metadata">Read more</a></td>
</tr>
<tr>
<td>assumeAdditionalFees</td>
<td>yes</td>
<td>Set to <code class="prettyprint">true</code> if the sending user will assume all additional facilitator fees, <code class="prettyprint">false</code> if the destination user will assume the fees. Defaults to <code class="prettyprint">false</code>.</td>
</tr>
<tr>
<td>facilitatorAmount</td>
<td>yes</td>
<td>Amount of the facilitator fee to override. Only applicable if the facilitator fee feature is enabled. If set to 0, facilitator fee is disabled for transaction. Cannot exceed 50% of the <code class="prettyprint">amount</code>.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>If successful, the response is simply the <a href="#how-transactions-work">Sender&rsquo;s Transaction ID</a> for the resulting payment.  Read more about <a href="#transactions">Transactions</a>.</p>

          <h1 id="checkouts">Checkouts</h1>
<pre class="highlight plaintext"> _        ,
(_\______/________
   \-|-|/|-|-|-|-|/
    \==/-|-|-|-|-/
     \/|-|-|-|,-'
      \--|-'''
       \_j________
       (_)     (_)

"Shopping Trolley" - hjw
</pre>

<p>Create a checkout on our <a href="/dev/pages/gateway#ux">Off-Site Gateway</a>. </p>

<p>Checkout sessions must be completed by the user within <strong>15 minutes</strong> of their creation. </p>

<p>There are two types of checkouts:</p>

<h3 id="standard-checkout">Standard Checkout</h3>

<p>A standard checkout means the payment is placed automatically and immediately after the user clicks the <em>Submit</em> button on the confirmation screen.</p>

<h3 id="paylater-checkout">PayLater Checkout</h3>

<p>A PayLater checkout means the user is redirected back to your site after clicking <em>Continue</em> on the confirmation screen.  No payment is created yet.  </p>

<p>You will have 15 minutes to <a href="#complete-a-paylater-checkout">complete the Checkout</a> in order to place the payment.</p>

<p>To create a PayLater Checkout, set <code class="prettyprint">checkoutWithApi</code> to <code class="prettyprint">true</code>.</p>

<h2 id="create-a-checkout">Create a Checkout</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JCGQXLrlfuOqdUYdTcLz3rBiCZQDRvdWIUPkw++GMuGhkem9Bo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"g7QLwvO37aN2HoKx1amekWi8a2g7AIuPbD5C/JSLqXIcDOxfTr"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"callback"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.something.com/callback"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"redirect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.something.com/return"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"allowGuestCheckout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"checkoutWithApi"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo123"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"allowFundingSources"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"additionalFundingSources"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"purchaseOrder"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"orderItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Prime Rib Sandwich"</span><span class="p">,</span><span class="w"> 
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A somewhat tasty non-vegetarian sandwich"</span><span class="p">,</span><span class="w"> 
                </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"> 
                </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
    </span><span class="s2">"destinationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-740-4294"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">15.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blahhh"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"key1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"something"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"key2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another thing"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<blockquote>
<p>If successful, you&rsquo;ll get this back:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"CheckoutId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"684862bc-8d94-4e53-9c41-26398b4b7fac"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<blockquote>
<p>Simply append the resulting <code class="prettyprint">CheckoutId</code> to this URI: <code class="prettyprint">https://www.dwolla.com/payment/checkout/</code></p>
</blockquote>
<pre class="highlight plaintext">https://www.dwolla.com/payment/checkout/684862bc-8d94-4e53-9c41-26398b4b7fac
</pre>

<blockquote>
<p>Then send your user there!</p>
</blockquote>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/offsitegateway/checkouts</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td></td>
<td>Your Application Key</td>
</tr>
<tr>
<td>client_secret</td>
<td></td>
<td>Your Application Secret</td>
</tr>
<tr>
<td>callback</td>
<td></td>
<td>Dwolla will POST a Callback containing results of the checkout when it is completed.</td>
</tr>
<tr>
<td>redirect</td>
<td></td>
<td>User will be redirected to this URL after successfully checking out, or cancelling.</td>
</tr>
<tr>
<td>purchaseOrder</td>
<td></td>
<td>A purchaseOrder JSON object. See below.</td>
</tr>
<tr>
<td>checkoutWithApi</td>
<td>yes</td>
<td>Create a <em>PayLater</em> checkout.  Defaults to <code class="prettyprint">false</code>.</td>
</tr>
<tr>
<td>allowGuestCheckout</td>
<td>yes</td>
<td>Enable <a href="https://developers.dwolla.com/dev/pages/gateway/direct">Dwolla Direct</a> experience for users without a Dwolla account</td>
</tr>
<tr>
<td>orderId</td>
<td>yes</td>
<td>Custom string to identify the checkout.  Not persisted in resulting transaction.</td>
</tr>
<tr>
<td>allowFundingSources</td>
<td>yes</td>
<td>Allow the user to pay with a funding source other than their account Balance.  Defaults to <code class="prettyprint">false</code>.</td>
</tr>
<tr>
<td>additionalFundingSources</td>
<td>yes</td>
<td>If <code class="prettyprint">allowFundingSources</code> enabled, use this to filter the types of funding sources allowed. <br> <code class="prettyprint">credit</code>: Only allow Dwolla Credit, if both the merchant and user support it <br> <code class="prettyprint">banks</code>: Only allow bank (ACH) funding sources <br> <code class="prettyprint">fisync</code>: Only allow FiSync-enabled bank funding sources <br> <code class="prettyprint">realtime</code>: Only allow <code class="prettyprint">credit</code> and <code class="prettyprint">fisync</code> sources <br> <code class="prettyprint">true</code>: Allow all funding source types <br> <code class="prettyprint">false</code>: Do not allow any funding sources</td>
</tr>
<tr>
<td>profileId</td>
<td>yes</td>
<td>This feature allows a recipient to display a different avatar and name, to collect money on a different person/entity&rsquo;s behalf. Requires special permission to use. Contact us if you&rsquo;re interested!</td>
</tr>
</tbody></table>

<h3 id="purchaseorder-object">PurchaseOrder Object</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>destinationId</td>
<td></td>
<td>Dwolla ID of the user who will receive the payment in this checkout.</td>
</tr>
<tr>
<td>total</td>
<td></td>
<td>Total checkout amount.</td>
</tr>
<tr>
<td>tax</td>
<td>yes</td>
<td>Order tax total.  For order display purposes only, not persisted.</td>
</tr>
<tr>
<td>discount</td>
<td>yes</td>
<td>Order discount (must be negative).  For order display purposes only, not persisted.</td>
</tr>
<tr>
<td>shipping</td>
<td>yes</td>
<td>Order shipping total.  For order display purposes only, not persisted.</td>
</tr>
<tr>
<td>notes</td>
<td>yes</td>
<td>A note of max 255 chars. to attach to the resulting payment.</td>
</tr>
<tr>
<td>facilitatorAmount</td>
<td>yes</td>
<td>Amount of the facilitator fee to override. Only applicable if the facilitator fee feature is enabled. If set to <code class="prettyprint">0</code>, facilitator fee is disabled for transaction.</td>
</tr>
<tr>
<td>metadata</td>
<td>yes</td>
<td>An object containing up to 10 key-value pairs of your choice which is persisted with the resulting transaction.  <a href="#metadata">Learn about Metadata</a></td>
</tr>
<tr>
<td>orderItems</td>
<td>yes</td>
<td>An array of JSON object(s) which contain a <code class="prettyprint">name</code>, <code class="prettyprint">description</code>, <code class="prettyprint">quantity</code>, and <code class="prettyprint">price</code>.</td>
</tr>
</tbody></table>

<h2 id="retrieve-a-checkout">Retrieve a Checkout</h2>

<p>Fetch an existing checkout by its <code class="prettyprint">checkoutId</code> to get its status and details.</p>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"CheckoutId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"684862bc-8d94-4e53-9c41-26398b4b7fac"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Discount"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Shipping"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Tax"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Total"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Completed"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"FundingSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Balance"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TransactionId"</span><span class="p">:</span><span class="w"> </span><span class="mi">69960</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ProfileId"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DestinationTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="mi">69959</span><span class="p">,</span><span class="w">
        </span><span class="s2">"OrderItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A somewhat tasty non-vegetarian sandwich"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Prime Rib Sandwich"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Price"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Total"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/offsitegateway/checkouts/{checkoutId}? client_id={key}&amp;client_secret={secret}</code></p>

<h3 id="response-parameters">Response Parameters</h3>

<p>This returns the <code class="prettyprint">CheckoutId</code>, <code class="prettyprint">Discount</code>, <code class="prettyprint">Shipping</code>, <code class="prettyprint">Tax</code>, <code class="prettyprint">Total</code>, <code class="prettyprint">OrderItems</code>, <code class="prettyprint">ProfileId</code>, <code class="prettyprint">Metadata</code> of the checkout and some additional information:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Status</td>
<td>Status of the checkout.  <br>Possible values: <code class="prettyprint">Created</code>, <code class="prettyprint">ReadyForApiCheckout</code>, <code class="prettyprint">Expired</code>, <code class="prettyprint">Completed</code></td>
</tr>
<tr>
<td>FundingSource</td>
<td>Type of funding source used to complete the checkout.  <br>Possible values: <code class="prettyprint">Balance</code>, <code class="prettyprint">Bank</code>, <code class="prettyprint">null</code></td>
</tr>
<tr>
<td>TransactionId</td>
<td>For the resulting payment, this is the <a href="#how-transactions-work"><em>Sender&rsquo;s</em> Transaction ID</a>.</td>
</tr>
<tr>
<td>DestinationTransactionId</td>
<td>For the resulting payment, this is the <a href="#how-transactions-work"><em>Recipient&rsquo;s</em> Transaction ID</a>.</td>
</tr>
</tbody></table>

<h2 id="complete-a-paylater-checkout">Complete a PayLater Checkout</h2>

<p>Finish a PayLater checkout.  This will attempt to create the payment.</p>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JCGQXLrlfuOqdUYdTcLz3rBiCZQDRvdWIUPkw++GMuGhkem9Bo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"g7QLwvO37aN2HoKx1amekWi8a2g7AIuPbD5C/JSLqXIcDOxfTr"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<blockquote>
<p>If successful, you&rsquo;ll get back:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CheckoutId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"041f503b-bf68-4d35-83b3-bc6304a98e78"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ClearingDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"OrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TestMode"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TransactionId"</span><span class="p">:</span><span class="w"> </span><span class="mi">69958</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DestinationTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="mi">69957</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<blockquote>
<p>Otherwise, you might get an error like this one:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="s2">"There are insufficient funds for this transaction."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="err">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/offsitegateway/checkouts/{checkoutId}/complete</code></p>

<h3 id="response-parameters">Response Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Amount</td>
<td>Payment amount</td>
</tr>
<tr>
<td>CheckoutId</td>
<td>Same Checkout ID you passed in!</td>
</tr>
<tr>
<td>OrderId</td>
<td>Any order ID provided when the checkout was created.  Otherwise, <code class="prettyprint">null</code>.</td>
</tr>
<tr>
<td>TestMode</td>
<td>Boolean.  True if <code class="prettyprint">Checkout.test</code> was set to true when checkout was created.</td>
</tr>
<tr>
<td>TransactionId</td>
<td>For the resulting payment, this is the <a href="#how-transactions-work"><em>Sender&rsquo;s</em> Transaction ID</a>.</td>
</tr>
<tr>
<td>DestinationTransactionId</td>
<td>For the resulting payment, this is the <a href="#how-transactions-work"><em>Recipient&rsquo;s</em> Transaction ID</a>.</td>
</tr>
</tbody></table>

          <h1 id="funding-sources">Funding Sources</h1>
<pre class="highlight plaintext">===========================================
#                  BANK                   #
#=========================================#
#   ____        ___________        ____   #
#  |    |      |     |     |      |    |  #      
#  |    |      |     |     |      |    |  #
#  |____|      |   --|--   |      |____|  #
#              |     |     |              #
###########################################

"Bank" - capablemonkey
</pre>
<pre class="highlight plaintext">[
  {
      "Id": "Balance",
      "Name": "My Dwolla Balance",
      "Type": "",
      "Verified": "true",
      "ProcessingType": ""
  },
  {
      "Id": "c58bb9f7f1d51d5547e1987a2833f4fa",
      "Name": "Donations Collection Fund - Savings",
      "Type": "Savings",
      "Verified": "true",
      "ProcessingType": "ACH"
  },
  {
      "Id": "c58bb9f7f1d51d5547e1987a2833f4fb",
      "Name": "Donations Payout Account - Checking",
      "Type": "Checking",
      "Verified": "true",
      "ProcessingType": "FiSync"
  }
]

</pre>

<p>Dwolla accounts have funding sources, such as linked bank accounts or a line of credit.  Funds can be deposited from a bank funding source (<code class="prettyprint">ACH</code> or <code class="prettyprint">FiSync</code>) into an user&rsquo;s account <code class="prettyprint">Balance</code>, and vice versa, funds can be withdrawn from a user&rsquo;s account balance to a bank funding source.</p>

<p>Payments funded by a real-time funding source such as the user&rsquo;s account balance, a Fi-Sync enabled bank account, or line of <code class="prettyprint">Credit</code> clear instantly.  On the other hand, transactions funded by ACH bank funding sources require 2-5 business days before the funds will be made available to the recipient.</p>

<p>ACH funding sources can be added and verified via the API.  </p>

<h3 id="funding-source-types">Funding Source Types</h3>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Clearing time</th>
</tr>
</thead><tbody>
<tr>
<td>Balance</td>
<td>Every Dwolla user has an account balance. Payments funded by a user&rsquo;s balance clear instantly.</td>
<td>Instant</td>
</tr>
<tr>
<td>ACH</td>
<td>A traditional bank account associated with the account.</td>
<td>2-5 business days</td>
</tr>
<tr>
<td>FiSync</td>
<td>A linked bank account with a participating FiSync bank.  Currently, only bank accounts with Veridian Credit Union support FiSync.</td>
<td>Instant</td>
</tr>
<tr>
<td>Credit</td>
<td>A line of credit via Dwolla Credit.  Currently, only business accounts that have undergone review may accept credit-funded payments.</td>
<td>Instant</td>
</tr>
<tr>
<td>Sweep</td>
<td>A special funding source type available to accounts with Sweep functionality.</td>
<td>Instant</td>
</tr>
</tbody></table>

<h3 id="funding-source-resource">Funding Source Resource</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Id</td>
<td>Funding Source ID</td>
</tr>
<tr>
<td>Name</td>
<td>Arbitrary nickname for the funding source</td>
</tr>
<tr>
<td>Type</td>
<td>Possible values: <code class="prettyprint">Savings</code>, <code class="prettyprint">Checking</code>, or empty string for Dwolla Account Balance and Credit: <code class="prettyprint">&quot;&quot;</code></td>
</tr>
<tr>
<td>Verified</td>
<td><code class="prettyprint">&quot;true&quot;</code> if funding source is verified.  Funding sources must be verified before funds can be deposited or withdrawn from them.</td>
</tr>
<tr>
<td>ProcessingType</td>
<td>Possible values: <code class="prettyprint">ACH</code>, <code class="prettyprint">FiSync</code>, or empty string: <code class="prettyprint">&quot;&quot;</code></td>
</tr>
</tbody></table>

<h2 id="list-funding-sources">List Funding Sources</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Balance"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Dwolla Balance"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Verified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ProcessingType"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c58bb9f7f1d51d5547e1987a2833f4fa"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Donations Collection Fund - Savings"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Savings"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Verified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ProcessingType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACH"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Credit"</span><span class="w">
            </span><span class="s2">"Name"</span><span class="err">:</span><span class="w"> </span><span class="s2">"Credit"</span><span class="w">
            </span><span class="s2">"Type"</span><span class="err">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="s2">"Verified"</span><span class="err">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
            </span><span class="s2">"ProcessingType"</span><span class="err">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c58bb9f7f1d51d5547e1987a2833f4fb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Donations Payout Account - Checking"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Checking"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Verified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ProcessingType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FiSync"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Enumerate a user&rsquo;s funding sources.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Funding</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/fundingsources/</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<p>The following querystring parameters are optional:</p>

<table><thead>
<tr>
<th>Param</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>destinationId</td>
<td>Only show funding sources that a particular recipient can accept a payment from.  See the section below.</td>
</tr>
<tr>
<td>destinationType</td>
<td>The type of the recipient.  Possible values: <code class="prettyprint">Email</code>, <code class="prettyprint">Dwolla</code>, <code class="prettyprint">Phone</code>.  Defaults to <code class="prettyprint">Dwolla</code></td>
</tr>
</tbody></table>

<h3 id="filtering-funding-sources">Filtering funding sources</h3>

<p>You can limit the results of this query to only the funding sources that a particular user can receive a payment from.  This is helpful, for instance, if the user account you&rsquo;re trying to send money to has opted-in to not accept payments funded via an ACH funding source.  In another case, only select merchant accounts have the ability to receive a Credit funded transaction, so Credit would not appear in the list of funding sources when filtered.</p>

<p>To do so, provide the <code class="prettyprint">destinationId</code> and <code class="prettyprint">destinationType</code> params in your request.  For example, if I only want to see funding sources that the user account ID 812-713-9234 can accept:</p>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/fundingsources/?destinationId=812-713-9234&amp;destinationType=Dwolla</code></p>

<h2 id="get-a-funding-source">Get a Funding Source</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c58bb9f7f1d51d5547e1987a2833f4fb"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Donations Payout Account - Checking"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Checking"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Verified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ProcessingType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FiSync"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Look up a particular funding source by its funding source ID.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Funding</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/fundingsources/{id}</code></p>

<h2 id="withdraw-to-a-funding-source">Withdraw to a funding source</h2>
<pre class="highlight json"><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> 
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="mi">327843</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-09-05T06:40:56Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdrawal"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"UserType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DestinationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXX9999"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DestinationName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Blah"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> 
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXX9999"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Blah"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"SourceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-742-8722"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"SourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cafe Kubal"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-742-8722"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cafe Kubal"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://uat.dwolla.com/avatars/812-742-8722"</span><span class="w"> 
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"ClearingDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-09-08T00:00:00Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Notes"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Fees"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"OriginalTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w"> 
      </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></pre>

<p>Withdraw funds from a user&rsquo;s account balance to one of the user&rsquo;s bank funding sources.  A new <a href="#transactions">Transaction</a> of type <code class="prettyprint">withdrawal</code> is created as a result.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Funding</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/fundingsources/{id}/withdraw</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>Amount to withdraw from balance to funding source</td>
</tr>
<tr>
<td>pin</td>
<td>User account PIN</td>
</tr>
</tbody></table>

<h2 id="deposit-from-a-funding-source">Deposit from a funding source</h2>
<pre class="highlight json"><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> 
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="mi">327843</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-09-05T06:40:56Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"UserType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DestinationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXX9999"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DestinationName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Blah"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-742-8722"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cafe Kubal"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://uat.dwolla.com/avatars/812-742-8722"</span><span class="w"> 
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"SourceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-742-8722"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"SourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cafe Kubal"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> 
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXX9999"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Blah"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w"> 
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"ClearingDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-09-08T00:00:00Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Notes"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Fees"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"OriginalTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w"> 
      </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></pre>

<p>Deposit funds from a user&rsquo;s bank funding source to the user&rsquo;s account balance.  A new <a href="#transactions">Transaction</a> of type <code class="prettyprint">deposit</code> is created as a result.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Funding</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/fundingsources/{id}/deposit</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>Amount to withdraw from balance to funding source</td>
</tr>
<tr>
<td>pin</td>
<td>User account PIN</td>
</tr>
</tbody></table>

<h2 id="add-new-funding-source">Add new Funding Source</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34da835f235cd25302ef0c5c1cb1d4b9"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Checking Account - Checking"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Checking"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ProcessingType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACH"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Add a new ACH bank account as a funding source for the authenticated user.  Once created, the funding source will need to be verified before it can be used.  Two micro-deposits will be made, and their amounts must be verified using the <a href="#verify-a-funding-source">Verify endpoint</a> or manually by the user on <a href="https://www.dwolla.com/">www.dwolla.com</a>.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Funding</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/fundingsources/</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_number</td>
<td>The bank account number</td>
</tr>
<tr>
<td>routing_number</td>
<td>The bank account&rsquo;s routing number.</td>
</tr>
<tr>
<td>account_type</td>
<td>Type of bank account: <code class="prettyprint">Checking</code> or <code class="prettyprint">Savings</code>.</td>
</tr>
<tr>
<td>name</td>
<td>Arbitrary nickname for the funding source</td>
</tr>
</tbody></table>

<h2 id="verify-a-funding-source">Verify a Funding Source</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34da835f235cd25302ef0c5c1cb1d4b9"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Checking Account - Checking"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Checking"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ProcessingType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACH"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Verify the amounts of the 2 micro-deposits sent to a funding source.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Funding</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/fundingsources/{id}/verify</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>deposit1</td>
<td>First amount</td>
</tr>
<tr>
<td>deposit2</td>
<td>Second amount</td>
</tr>
</tbody></table>

          <h1 id="transactions">Transactions</h1>
<pre class="highlight plaintext">{
    "Id": 4443952,
    "Amount": 0.01,
    "Date": "2014-01-22T13:09:38Z",
    "Type": "money_sent",
    "UserType": "Dwolla",
    "DestinationId": "812-713-9234",
    "DestinationName": "Peter Douglas",
    "Destination": {
        "Id": "812-713-9234",
        "Name": "Peter Douglas",
        "Type": "Dwolla",
        "Image": "http://uat.dwolla.com/avatars/812-713-9234"
    },
    "SourceId": "812-629-2658",
    "SourceName": "Tom Walker",
    "Source": {
        "Id": "812-713-9234",
        "Name": "Tom Walker",
        "Type": "Dwolla",
        "Image": "http://uat.dwolla.com/avatars/812-713-9234"
    },
    "ClearingDate": "",
    "Status": "processed" ,
    "Notes": "don't spend it all in one place!",
    "OriginalTransactionId": null,
    "Metadata": null ,
    "Fees": null
}
</pre>
<pre class="highlight plaintext">$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$$$,,,$$$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$$"OOO"$$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$$!OOO!$$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$,"OOO",$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$,"OOOOOOO",$$$$$$$$$$$$$
$$$$$$$$$$$$!"OOOOOOOOOOO"!$$$$$$$$$$$
$$$$$$$$$$,"OOOOOOOOOOOOOOO",$$$$$$$$$
$$$$$$$$,1OOOOOOOOOOOOOOOOOOO7,$$$$$$$
$$$$$$,!OOOOOOOOOOOOOOOOOOOOOO"$$$$$$$
$$$$$$!OOOOOOOOO/""""'\OOOOOOOO1$$$$$$
$$$$$$"OOOOOOOOOO"$$$$!OOOOOOOO"$$$$$$
$$$$$$"OOOOOOOOOOO!$$$",OOOOOOO!$$$$$$
$$$$$$$",OOOOOOOOOO",$$$"""""""$$$$$$$
$$$$$$$$"!OOOOOOOOOOO",$$$$$$$$$$$$$$$
$$$$$$$$$$",OOOOOOOOOOO",$$$$$$$$$$$$$
$$$$$$$$$$$$"OOOOOOOOOOOO",$$$$$$$$$$$
$$$$$$$$$$$$$"!OOOOOOOOOOOO"+$$$$$$$$$
$$$$$$$$$$$$$$$"==OOOOOOOOOOO,$$$$$$$$
$$$$$$$$,,,,,,$$$$",OOOOOOOOOO",$$$$$$
$$$$$$,"OOOOOO',$$$$",OOOOOOOOO!$$$$$$
$$$$$$1OOOOOOOO."~~~"OOOOOOOOOO!$$$$$$
$$$$$$!OOOOOOOOOOOOOOOOOOOOOOO1$$$$$$$
$$$$$$",OOOOOOOOOOOOOOOOOOOOO,"$$$$$$$
$$$$$$$",OOOOOOOOOOOOOOOOOOO!$$$$$$$$$
$$$$$$$$$1OOOOOOOOOOOOOOOO,1$$$$$$$$$$
$$$$$$$$$$"~~,OOOOOOOOOO,"$$$$$$$$$$$$
$$$$$$$$$$$$$$"""1OOO1"'$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$$!OOO!$$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$$,OOO,$$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$$$"""$$$$$$$$$$$$$$$$$
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
$$$$$ "DWOLLA DWOLLA BILL YA'LL" $$$$$
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
</pre>

<p>Any movement of money, whether payment, withdrawal, deposit, or fee, is recorded as an individual Transaction.  For instance, depositing money from a funding source into your Dwolla account balance creates a <code class="prettyprint">Transaction</code> of type <code class="prettyprint">deposit</code>.</p>

<h3 id="how-transactions-work">How Transactions Work</h3>

<p>When a payment is sent, 2 or more transactions are created.  At least one is created to credit the recipient&rsquo;s account balance, and another one to debit the sender&rsquo;s account balance.  </p>

<p>As a simple example, let&rsquo;s say Bob sends $5 to Alice from his account balance.  From this action, two <code class="prettyprint">Transactions</code> are created:</p>

<ol>
<li>Transaction <code class="prettyprint">512010</code>: credits Alice&rsquo;s account with $5</li>
<li>Transaction <code class="prettyprint">512011</code>: deducts $5 from Bob&rsquo;s account</li>
</ol>

<p>It&rsquo;s important to keep in mind that when Bob looks at this payment, he will see the credit transaction&rsquo;s ID: <code class="prettyprint">512010</code>.  This is called the <strong>Sender&rsquo;s Transaction ID</strong>. </p>

<p>Similarly, when Alice looks up this payment, she will see a different transaction of ID <code class="prettyprint">512011</code>, which we call the <strong>Recipient&rsquo;s Transaction ID</strong>.</p>

<h4 id="additional-transactions">Additional Transactions</h4>

<p>For a particular payment, additional transactions are created: </p>

<ul>
<li>if the payment is bank sourced, to fund the payment</li>
<li>if the payment is over $10 it will incur a $0.25 <em>Dwolla Fee</em></li>
<li>if there is a facilitator fee</li>
</ul>

<h3 id="transaction-types">Transaction Types</h3>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>money_sent</td>
<td>Payment sent by a user</td>
</tr>
<tr>
<td>money_received</td>
<td>Payment received by a user</td>
</tr>
<tr>
<td>deposit</td>
<td>Funds deposited from a Funding Source (e.g. bank account) to the user&rsquo;s Dwolla account balance</td>
</tr>
<tr>
<td>withdrawal</td>
<td>Funds withdrawn from the user&rsquo;s Dwolla account balance to an associated Funding Source</td>
</tr>
<tr>
<td>fee</td>
<td>Transaction fee of $0.25 or Facilitator Fee</td>
</tr>
</tbody></table>

<h3 id="transaction-statuses">Transaction Statuses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pending</td>
<td>Bank-funded payment awaiting clearance; typically requires 3 - 5 business days to clear.</td>
</tr>
<tr>
<td>processed</td>
<td>Transaction has cleared successfully.</td>
</tr>
<tr>
<td>failed</td>
<td>Transaction failed to clear successfully.  Usually, this is a result of an ACH failure (insufficient funds, etc.).</td>
</tr>
<tr>
<td>cancelled</td>
<td>A pending transaction has been canceled, and will not process further.</td>
</tr>
<tr>
<td>reclaimed</td>
<td>The payment was returned to the sender after being unclaimed by the recipient for a period of time.</td>
</tr>
</tbody></table>

<p><aside class="notice">The initial transaction state for all real-time (e.g. Balance, FiSync, Credit) funded transfers will always be &ldquo;processed&rdquo;.</aside></p>

<h3 id="transaction-resource">Transaction Resource</h3>
<pre class="highlight plaintext">{
  "Amount": 1,
  "Date": "2014-01-22T13:11:10Z",
  "UserType": "Email",
  "DestinationId": "bob@dwolla.com",
  "DestinationName": "bob@dwolla.com,
  "Destination": {
      "Id": "bob@dwolla.com",
      "Name": "bob@dwolla.com",
      "Type": "Email",
      "Image": ""
  },
  "Id": 12345,
  "SourceId": "812-111-2222",
  "SourceName": "Alice",
  "Source": {
      "Id": "812-111-2222",
      "Name": "Alice",
      "Type": "Dwolla",
      "Image": "http://uat.dwolla.com/avatars/812-111-2222"
  },
  "Type": "money_sent",
  "Status": "processed" ,
  "ClearingDate": "",
  "Notes": "Thank you for lunch!",
  "OriginalTransactionId": null,
  "Metadata": {
      "some meta info":  "foobar",
      "aProfoundRealization": "pretzels"
  },
  "Fees": [
      {
          "Id": 1646163,
          "Amount": 0.1,
          "Type": "Facilitator Fee"
      }
  ]
}
</pre>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Amount</td>
<td>Amount of funds involved.</td>
</tr>
<tr>
<td>Date</td>
<td>Timestamp of when the transaction was created.  ISO-8601 format.</td>
</tr>
<tr>
<td>UserType</td>
<td>Type of destination.  Can be <code class="prettyprint">Dwolla</code> if money was sent to a Dwolla ID, <code class="prettyprint">Email</code>, or <code class="prettyprint">PhoneNumber</code>.</td>
</tr>
<tr>
<td>DestinationId</td>
<td>Dwolla ID, email address, or phone number of recipient.</td>
</tr>
<tr>
<td>DestinationName</td>
<td>Full name of recipient Dwolla user, if available.  Otherwise, email or phone number of non-user.</td>
</tr>
<tr>
<td>Destination</td>
<td>JSON object describing the DestinationId, DestinationName, recipient type (possible values: <code class="prettyprint">Dwolla</code>, <code class="prettyprint">Email</code>, <code class="prettyprint">Phone</code>), and avatar URL of recipient, if available.</td>
</tr>
<tr>
<td>Id</td>
<td>Unique Transaction ID.  Incrementally generated integer.  Currently, Transaction IDs are 7 digits long in production, but will eventually grow longer.</td>
</tr>
<tr>
<td>SourceId</td>
<td>Dwolla ID of the sender&rsquo;s account</td>
</tr>
<tr>
<td>SourceName</td>
<td>Full name of the sender</td>
</tr>
<tr>
<td>Source</td>
<td>JSON object describing the SourceId, DestinationName, and avatar URL of sender, if available.  <code class="prettyprint">Type</code> will always be <code class="prettyprint">Dwolla</code>.</td>
</tr>
<tr>
<td>Type</td>
<td>Transaction type <a href="#transaction-types">See above</a></td>
</tr>
<tr>
<td>Status</td>
<td>Transaction Status.  <a href="#transaction-statuses">See above</a></td>
</tr>
<tr>
<td>ClearingDate</td>
<td>For bank funded payments, this is the expected clearing date.  Otherwise, for real time payments (e.g. funded by <code class="prettyprint">Balance</code>), this will be an empty string: <code class="prettyprint">&quot;&quot;</code></td>
</tr>
<tr>
<td>Notes</td>
<td>Note attached to the payment.  Max 250 characters.</td>
</tr>
<tr>
<td>OriginalTransactionId</td>
<td>If the transaction is a refund, this is the transaction ID of the original transaction which was refunded. Otherwise, <code class="prettyprint">null</code>.</td>
</tr>
<tr>
<td>Metadata</td>
<td>JSON object with max 10 key-value pairs. Keys and values are strings of max length 255. <code class="prettyprint">null</code> if not provided or visible to application.  <a href="#metadata">Read more</a></td>
</tr>
<tr>
<td>Fees</td>
<td>Array of any facilitator fees or transaction fees incurred by this payment.  Otherwise, <code class="prettyprint">null</code>.</td>
</tr>
</tbody></table>

<h2 id="list-a-user&#39;s-transactions">List a user&rsquo;s transactions</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5569196</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-08-13T05:17:15Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"money_sent"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"UserType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DestinationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ejfwefjwfk02022@gmail.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DestinationName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ejfwefjwfk02022@gmail.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ejfwefjwfk02022@gmail.com"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ejfwefjwfk02022@gmail.com"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"SourceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-687-7049"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"SourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gordon Zheng"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-687-7049"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gordon Zheng"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://dwolla-avatars.s3.amazonaws.com/812-687-7049/ac044552"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"ClearingDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Fees"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"OriginalTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Retrieve the transaction history of the authenticated user.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Transactions</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/transactions</code></p>

<h4 id="example:">Example:</h4>

<p>To get the latest 200 transactions of type <code class="prettyprint">money_sent</code>, <code class="prettyprint">fee</code>, and <code class="prettyprint">deposit</code>:</p>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/transactions?types=money_sent,fee,deposit&amp;limit=200</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>types</td>
<td>Types of transactions to return.  By default, all types returned.  Possible values: <code class="prettyprint">money_sent</code>, <code class="prettyprint">money_received</code>, <code class="prettyprint">deposit</code>, <code class="prettyprint">withdrawal</code>, <code class="prettyprint">fee</code>.  Delimited by <code class="prettyprint">,</code></td>
</tr>
<tr>
<td>limit</td>
<td>Number of transactions to return.  Max 200.  Defaults to 10.</td>
</tr>
<tr>
<td>skip</td>
<td>Number of transactions to skip.</td>
</tr>
<tr>
<td>sinceDate</td>
<td>Earliest date and time for which to retrieve transactions.  Must be ISO-8601 formatted.  Example: <code class="prettyprint">2014-08-13T21:05:23.797Z</code></td>
</tr>
<tr>
<td>endDate</td>
<td>Latest date and time for which to retrieve transactions.  Must be ISO-8601 formatted.  Example: <code class="prettyprint">2014-08-13T21:05:23.797Z</code></td>
</tr>
</tbody></table>

<h2 id="list-an-app&#39;s-transactions">List an app&rsquo;s transactions</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5569196</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-08-13T05:17:15Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"money_sent"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"UserType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DestinationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ejfwefjwfk02022@gmail.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DestinationName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ejfwefjwfk02022@gmail.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ejfwefjwfk02022@gmail.com"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ejfwefjwfk02022@gmail.com"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"SourceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-687-7049"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"SourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gordon Zheng"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-687-7049"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gordon Zheng"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://dwolla-avatars.s3.amazonaws.com/812-687-7049/ac044552"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"ClearingDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Fees"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"OriginalTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>List the transactions which your application has created / facilitated.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/transactions?client_id={}&amp;client_secret={}</code></p>

<h4 id="example:">Example:</h4>

<p>To get the latest 200 transactions of type <code class="prettyprint">money_sent</code>, <code class="prettyprint">fee</code>, and <code class="prettyprint">deposit</code>:</p>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/transactions?types=money_sent,fee,deposit&amp;limit=200</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>Application key</td>
</tr>
<tr>
<td>client_secret</td>
<td>Application secret</td>
</tr>
<tr>
<td>types</td>
<td>Types of transactions to return.  By default, all types returned.  Possible values: <code class="prettyprint">money_sent</code>, <code class="prettyprint">money_received</code>, <code class="prettyprint">deposit</code>, <code class="prettyprint">withdrawal</code>, <code class="prettyprint">fee</code>.  Delimited by <code class="prettyprint">,</code></td>
</tr>
<tr>
<td>limit</td>
<td>Number of transactions to return.  Max 200.  Defaults to 10.</td>
</tr>
<tr>
<td>skip</td>
<td>Number of transactions to skip.</td>
</tr>
<tr>
<td>sinceDate</td>
<td>Earliest date and time for which to retrieve transactions.  Must be ISO-8601 formatted.  Example: <code class="prettyprint">2014-08-13T21:05:23.797Z</code></td>
</tr>
<tr>
<td>endDate</td>
<td>Latest date and time for which to retrieve transactions.  Must be ISO-8601 formatted.  Example: <code class="prettyprint">2014-08-13T21:05:23.797Z</code></td>
</tr>
</tbody></table>

<h2 id="get-a-specific-transaction">Get a specific transaction</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="mi">331506</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">15.25</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-09-17T18:18:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdrawal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"UserType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"DestinationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXX9999"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"DestinationName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Blah"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXX9999"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Blah"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"SourceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-742-8722"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"SourceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cafe Kubal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-742-8722"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cafe Kubal"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://uat.dwolla.com/avatars/812-742-8722"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ClearingDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-09-19T00:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Notes"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Fees"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"OriginalTransactionId"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Look up a particular transaction by its ID (Either Sender&rsquo;s or Recipient&rsquo;s.  Read about transaction IDs <a href="#how-transactions-work">here</a>.)  Either an OAuth access token can be supplied, or if your API application facilitated this transaction, you can supply an application key and secret instead.</p>

<p><aside class="reminder">This endpoint can take either an <a href="#authentication">an OAuth access token</a> with the <code class="prettyprint">Transactions</code> scope or an API application&rsquo;s <code class="prettyprint">client_id</code> and <code class="prettyprint">client_secret</code>.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p>To fetch a transaction which belongs to the authorized user:</p>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/transactions/{id}</code></p>

<p>or to fetch a transaction which belongs to an application:</p>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/transactions/{id}?client_id={}&amp;client_secret={}</code></p>

          <h1 id="scheduled-transactions">Scheduled Transactions</h1>

<h2 id="create-scheduled-transaction">Create Scheduled Transaction</h2>

<h2 id="list-scheduled-transactions">List Scheduled Transactions</h2>

<h2 id="retrieve-scheduled-transaction">Retrieve Scheduled Transaction</h2>

<h2 id="edit-scheduled-transaction">Edit Scheduled Transaction</h2>

<h2 id="delete-scheduled-transaction">Delete Scheduled Transaction</h2>

<h2 id="delete-all-scheduled-transactions">Delete all Scheduled Transactions</h2>

          <h1 id="transaction-stats">Transaction Stats</h1>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"TransactionsCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TransactionsTotal"</span><span class="p">:</span><span class="w"> </span><span class="mf">116.92</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Transaction statistics can be retrieved for the authenticated user.   Currently, the report contains a count of transactions and sum of transactions over a given period of time.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Transactions</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/transactions/stats</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>startDate</td>
<td>yes</td>
<td>Starting date and time for which to select transactions for report. Defaults to 0300 UTC, today.</td>
</tr>
<tr>
<td>endDate</td>
<td>yes</td>
<td>Ending date and time for which to select transactions for report.  Defaults to current date and time.</td>
</tr>
</tbody></table>

          <h1 id="users">Users</h1>
<pre class="highlight plaintext">USERS!

 o   \ o /  _ o         __|    \ / 
/|\    |     /\   ___\o   \o    |  
/ \   / \   | \  /)  |    ( \  /o\ 

- "Tonja Hickey"
</pre>

<p>Dwolla users can be looked up via the API.</p>

<h3 id="account-types">Account Types</h3>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Personal</td>
<td>Account belonging to an individual.  Default transaction limit of $5000.</td>
</tr>
<tr>
<td>Commercial</td>
<td>Merchant/business account.  Default transaction limit of $10000.</td>
</tr>
<tr>
<td>NonProfit</td>
<td>Account belonging to a non-profit organization. Default transaction limit of $10000.</td>
</tr>
</tbody></table>

<h2 id="get-basic-account-info">Get Basic Account Info</h2>
<pre class="highlight php">/**
 * EXAMPLE 1: 
 *   Fetch basic account information
 *   for a given Dwolla ID
 **/
$user = $Dwolla-&gt;getUser('812-546-3855');
if(!$user) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { print_r($user); } // Print user information
</pre>
<pre class="highlight ruby"><span class="c1"># EXAMPLE 1: </span>
<span class="c1">#   Fetch basic account information</span>
<span class="c1">#   for a given Dwolla ID</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="no">Users</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'812-626-8794'</span><span class="p">)</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1: 
      Fetch basic account information
      for a given Dwolla ID
'''</span>
<span class="n">me</span> <span class="o">=</span> <span class="n">Dwolla</span><span class="o">.</span><span class="n">get_account_info</span><span class="p">(</span><span class="s">'812-626-8794'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">me</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/**
 * EXAMPLE 1: 
 *   Fetch basic account information
 *   for a given Dwolla ID
 **/</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">basicAccountInfo</span><span class="p">(</span><span class="s1">'812-546-3855'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>

<blockquote>
<p>If successful, you&rsquo;ll receive this response:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-111-1111"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">41.584546</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-93.634167</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test User"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Retrieve basic information about <strong>any</strong> Dwolla user, given their Dwolla ID or email address.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/users/{account_identifier}?client_id={}&amp;client_secret={}</code></p>

<p><code class="prettyprint">account_identifier</code> must be a Dwolla ID or email address.</p>

<h4 id="example">Example</h4>

<p>To lookup the user with email <code class="prettyprint">gordon@dwolla.com</code>:</p>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/users/gordon@dwolla.com?client_id={}&amp;client_secret={}</code></p>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Id</td>
<td>User&rsquo;s Dwolla ID</td>
</tr>
<tr>
<td>Latitude</td>
<td>If this is a business account, latitude of the account&rsquo;s location.  Otherwise, always <code class="prettyprint">0</code> for individual accounts.</td>
</tr>
<tr>
<td>Longitude</td>
<td>If this is a business account, longitude of the account&rsquo;s location.  Otherwise, always <code class="prettyprint">0</code> for individual accounts.</td>
</tr>
<tr>
<td>Name</td>
<td>Full account name (or business name for a business account)</td>
</tr>
</tbody></table>

<h2 id="get-full-account-info">Get Full Account Info</h2>
<pre class="highlight php">/**
 * EXAMPLE 1: 
 *   Fetch account information for the
 *   account associated with the provided
 *   OAuth token
 **/
$me = $Dwolla-&gt;me();
if(!$me) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { print_r($me); } // Print user information
</pre>
<pre class="highlight ruby"><span class="c1"># EXAMPLE 1:</span>
<span class="c1">#   Fetch account information for the</span>
<span class="c1">#   account associated with the provided</span>
<span class="c1">#   OAuth token</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="no">Users</span><span class="p">.</span><span class="nf">get</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1: 
      Fetch account information for the
      account associated with the provided
      OAuth token
'''</span>
<span class="n">me</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">get_account_info</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">me</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/**
 * EXAMPLE 1: 
 *   Fetch account information for the
 *   account associated with the provided
 *   OAuth token
 **/</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">fullAccountInfo</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>

<blockquote>
<p>If successful, you&rsquo;ll receive this response:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"City"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Des Moines"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-111-1111"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">41.584546</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-93.634167</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test User"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"State"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IA"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Personal"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Retrieve information about the authorized user.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">AccountInfoFull</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/users/</code></p>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Id</td>
<td>User&rsquo;s Dwolla ID</td>
</tr>
<tr>
<td>Latitude</td>
<td>If this is a business account, latitude of the account&rsquo;s location.  Otherwise, always <code class="prettyprint">0</code> for individual accounts.</td>
</tr>
<tr>
<td>Longitude</td>
<td>If this is a business account, longitude of the account&rsquo;s location.  Otherwise, always <code class="prettyprint">0</code> for individual accounts.</td>
</tr>
<tr>
<td>Name</td>
<td>Full account name (or business name for a business account)</td>
</tr>
<tr>
<td>City</td>
<td>User&rsquo;s home city</td>
</tr>
<tr>
<td>State</td>
<td>User&rsquo;s home state</td>
</tr>
<tr>
<td>Type</td>
<td><code class="prettyprint">Personal</code> or <code class="prettyprint">Commercial</code></td>
</tr>
</tbody></table>

<h2 id="get-avatar">Get Avatar</h2>
<pre class="highlight plaintext">GET https://www.dwolla.com/avatars/812-713-9234
</pre>

<p>Retrieve the avatar image for a Dwolla user, given their Dwolla ID.  This requires no authentication and will return a 220px x 220px PNG file.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/avatars/{dwolla_id}</code></p>

<h2 id="find-nearby-businesses">Find Nearby Businesses</h2>
<pre class="highlight json"></pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>
<span class="sd">/**
 * EXAMPLE 1: 
 * Fetch contacts of businesses near lat 45, lon 45
 **/</span>
<span class="nv">$contacts</span> <span class="o">=</span> <span class="nv">$Dwolla</span><span class="o">-&gt;</span><span class="na">nearby</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span><span class="mi">45</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$contacts</span><span class="p">)</span> <span class="p">{</span> <span class="k">echo</span> <span class="s2">"Error: </span><span class="si">{</span><span class="nv">$Dwolla</span><span class="o">-&gt;</span><span class="na">getError</span><span class="p">()}</span> <span class="nx">\n</span><span class="s2">"; } // Check for errors
else { print_r(</span><span class="nv">$contacts</span><span class="s2">); } // Print contacts
?&gt;
</span></pre>
<pre class="highlight ruby"><span class="c1"># EXAMPLE 1: </span>
<span class="c1">#   Get a list of nearby Dwolla spots</span>
<span class="c1">#   for a given set of coordinates</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="no">Contacts</span><span class="p">.</span><span class="nf">nearby</span><span class="p">({</span><span class="ss">:latitude</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">:longitude</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">})</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1: 
      Fetch spots near  41.59 and 
      -93.62 (default parameters in dwolla-python)
'''</span>
<span class="n">contacts</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">get_nearby_spots</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">contacts</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/**
 * EXAMPLE 1: 
 * Fetch all spots near lat 45 and 
 * long 45
 **/</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">nearby</span><span class="p">(</span><span class="nx">cfg</span><span class="p">.</span><span class="nx">apiKey</span><span class="p">,</span> <span class="nx">cfg</span><span class="p">.</span><span class="nx">apiSecret</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>

<blockquote>
<p>If successful, you&rsquo;ll receive this response:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ThelmasTreats"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-608-8758"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.dwolla.com/avatars/812-608-8758"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">41.590043</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-93.62095</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"615 3rd Street\n"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"City"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Des Moines"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"State"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IA"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"PostalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50309"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-608-8758"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Delta"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0009069999999908873</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IKONIX Studio"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-505-4939"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.dwolla.com/avatars/812-505-4939"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">41.5887958</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-93.6215057</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"506 3rd St\nSuite 206"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"City"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Des Moines"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"State"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IA"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"PostalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50309"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-505-4939"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Delta"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0027098999999992657</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Retrieve a list of Dwolla business accounts (<a href="https://www.dwolla.com/spots">Spots</a>) near a given location.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/contacts/nearby?client_id={}&amp;client_secret={}&amp;latitude={}&amp;longitude={}</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>latitude</td>
<td></td>
<td>Latitude coordinates (between -90.0 and 90.0)</td>
</tr>
<tr>
<td>longitude</td>
<td></td>
<td>Longitude coordinates (between -180.0 and 180.0)</td>
</tr>
<tr>
<td>range</td>
<td>yes</td>
<td>Range to retrieve spots for in miles (default 10, minimum 1)</td>
</tr>
<tr>
<td>limit</td>
<td>yes</td>
<td>Number of spots to retrieve (default 10, minimum 1, maximum 100)</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Name</td>
<td>Business name</td>
</tr>
<tr>
<td>Id</td>
<td>Dwolla ID</td>
</tr>
<tr>
<td>Type</td>
<td>Will always be <code class="prettyprint">Dwolla</code></td>
</tr>
<tr>
<td>Image</td>
<td>URL to business&rsquo;s account avatar</td>
</tr>
<tr>
<td>Latitude</td>
<td>Business location</td>
</tr>
<tr>
<td>Longitude</td>
<td>Business location</td>
</tr>
<tr>
<td>Address</td>
<td>Business address.  Street address lines are separated by an escaped newline character: <code class="prettyprint">\n</code></td>
</tr>
<tr>
<td>City</td>
<td>Business address city</td>
</tr>
<tr>
<td>State</td>
<td>Business address state</td>
</tr>
<tr>
<td>PostalCode</td>
<td>Business address zip code</td>
</tr>
<tr>
<td>Group</td>
<td>Set to Dwolla ID of business account</td>
</tr>
<tr>
<td>Delta</td>
<td>Proximity to the lat / long specified in query</td>
</tr>
</tbody></table>

          <h1 id="contacts">Contacts</h1>
<pre class="highlight plaintext">[
    {
        "Name": "Joe Schmoe",
        "Id": "812-999-0090",
        "Type": "Dwolla",
        "Image": "https://www.dwolla.com/avatars/812-999-0090",
        "City": "St Louis",
        "State": "MO"
    },
    {
        "Name": "Sam Schmoe Super Foods",
        "Id": "812-999-0091",
        "Type": "Dwolla",
        "Image": "https://www.dwolla.com/avatars/812-999-0091",
        "City": "Des Moines",
        "State": "IA"
    }
]
</pre>

<p>Any Dwolla user which a user sends money to or receives money from becomes a <code class="prettyprint">Contact</code> of that user.</p>

<h3 id="contact-resource">Contact Resource</h3>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Name</td>
<td>User&rsquo;s full name (business name, if business account)</td>
</tr>
<tr>
<td>Id</td>
<td>Dwolla ID of user</td>
</tr>
<tr>
<td>Type</td>
<td>Will always be <code class="prettyprint">Dwolla</code></td>
</tr>
<tr>
<td>Image</td>
<td>URL of the user&rsquo;s avatar image</td>
</tr>
<tr>
<td>City</td>
<td>User&rsquo;s resident city</td>
</tr>
<tr>
<td>State</td>
<td>User&rsquo;s resident state</td>
</tr>
</tbody></table>

<h2 id="get-a-user&#39;s-contacts">Get a user&rsquo;s contacts</h2>
<pre class="highlight json"></pre>
<pre class="highlight php"><span class="cp">&lt;?php</span>
<span class="sd">/**
 * EXAMPLE 1: 
 *   Fetch last 10 contacts from the 
 *   account associated with the provided
 *   OAuth token
 **/</span>
<span class="nv">$contacts</span> <span class="o">=</span> <span class="nv">$Dwolla</span><span class="o">-&gt;</span><span class="na">contacts</span><span class="p">(</span><span class="s1">'Ben'</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$contacts</span><span class="p">)</span> <span class="p">{</span> <span class="k">echo</span> <span class="s2">"Error: </span><span class="si">{</span><span class="nv">$Dwolla</span><span class="o">-&gt;</span><span class="na">getError</span><span class="p">()}</span> <span class="nx">\n</span><span class="s2">"; } // Check for errors
else { print_r(</span><span class="nv">$contacts</span><span class="s2">); } // Print contacts

/**
 * EXAMPLE 2: 
 *   Search through the contacts of the
 *   account associated with the provided
 *   OAuth token for 'David', return 20 
 *   "</span><span class="nx">Dwolla</span><span class="s2">" type results. 
 **/

</span><span class="nv">$contacts</span><span class="s2"> = </span><span class="nv">$Dwolla-&gt;contacts</span><span class="s2">('David', array('dwolla'), 20);
if(!</span><span class="nv">$contacts</span><span class="s2">) { echo "</span><span class="nx">Error</span><span class="o">:</span> <span class="p">{</span><span class="nv">$Dwolla</span><span class="o">-&gt;</span><span class="na">getError</span><span class="p">()}</span> <span class="nx">\n</span><span class="s2">"; } // Check for errors
else { print_r(</span><span class="nv">$contacts</span><span class="s2">); } // Print contacts
?&gt;
</span></pre>
<pre class="highlight ruby"><span class="c1"># EXAMPLE 1: </span>
<span class="c1">#   Fetch last 10 contacts from the </span>
<span class="c1">#   account associated with the provided</span>
<span class="c1">#   OAuth token</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="no">Contacts</span><span class="p">.</span><span class="nf">get</span>


<span class="c1"># EXAMPLE 2: </span>
<span class="c1">#   Search through the contacts of the</span>
<span class="c1">#   account associated with the provided</span>
<span class="c1">#   OAuth token</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="no">Contacts</span><span class="p">.</span><span class="nf">get</span><span class="p">({</span><span class="ss">:search</span> <span class="o">=&gt;</span> <span class="s1">'Ben'</span><span class="p">})</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1: 
      Fetch last 10 contacts from the 
      account associated with the provided
      OAuth token
'''</span>
<span class="n">contacts</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">get_contacts</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">contacts</span><span class="p">)</span>


<span class="s">'''
    EXAMPLE 2: 
      Search through the contacts of the
      account associated with the provided
      OAuth token
'''</span>
<span class="n">contacts</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">get_contacts</span><span class="p">(</span><span class="s">'Ben'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">contacts</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/**
 * EXAMPLE 1: 
 *   Fetch last 10 contacts from the 
 *   account associated with the provided
 *   OAuth token
 **/</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">contacts</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>

<span class="cm">/**
 * EXAMPLE 2: 
 *   Search through the contacts of the
 *   account associated with the provided
 *   OAuth token
 **/</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">contacts</span><span class="p">({</span><span class="na">search</span><span class="p">:</span> <span class="s1">'Ben'</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>

</pre>

<blockquote>
<p>If successful, you&rsquo;ll receive this response:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joe Schmoe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-999-0090"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.dwolla.com/avatars/812-999-0090"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"City"</span><span class="p">:</span><span class="w"> </span><span class="s2">"St Louis"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"State"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MO"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sam Schmoe Super Foods"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-999-0091"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.dwolla.com/avatars/812-999-0091"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"City"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Des Moines"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"State"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IA"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Moe Schmoe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-999-0092"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.dwolla.com/avatars/812-999-0092"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"City"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Simpsonville"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"State"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SC"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Use the following endpoint to fetch the authorized user&rsquo;s contacts.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Contacts</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/contacts/</code></p>

<h3 id="optional-paramters">Optional Paramters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>search</td>
<td>Search term used to search contacts.</td>
</tr>
<tr>
<td>types</td>
<td>Account types to return.</td>
</tr>
<tr>
<td>limit</td>
<td>Number of contacts to return (default is 10).</td>
</tr>
</tbody></table>

          <h1 id="balance">Balance</h1>
<pre class="highlight php">/**
 * EXAMPLE 1: 
 *   Fetch account balance for the 
 *   account associated with the provided
 *   OAuth token
 **/
$balance = $Dwolla-&gt;balance();
if($balance == NULL) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { echo $balance; } // Print user's balance
</pre>
<pre class="highlight ruby"><span class="c1"># EXAMPLE 1: </span>
<span class="c1">#   Get the balance of the authenticated user</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="no">Balance</span><span class="p">.</span><span class="nf">get</span>
</pre>
<pre class="highlight python"><span class="n">balance</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">get_balance</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">balance</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/***
 * Example 1:
 *
 * Get balance of the user associated with the OAuth token.
 */</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">balance</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="mf">55.76</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Fetch a user&rsquo;s account balance.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Balance</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/balance/</code></p>

          <h1 id="masspay">MassPay</h1>
<pre class="highlight plaintext">$~ cowsay MOOOspay

  _________
&lt; MOOOspay &gt;
  ---------
         \   ^__^ 
          \  (oo)\_______
             (__)\       )\/\
                 ||----w |
                 ||     ||

</pre>

<p>MassPay allows you to easily send up to 10,000 payments with a single API request. The payments are funded from a single user&rsquo;s specified funding source and processed asynchronously upon submission. </p>

<p>Your MassPay <code class="prettyprint">Job</code> will then be queued and processed.  As the service processes a <code class="prettyprint">Job</code>, each <code class="prettyprint">Item</code> is processed one ofter the other, at an average rate of about 0.5 sec. / item.  Therefore, you can expect a 1000-item MassPay Job to be completed in about 8 minutes.</p>

<p>MassPay offers a significant advantage over repeatedly calling the <a href="#send-money">Send</a> endpoint for each individual transaction, which is the fact that a bank-funded MassPay Job only incurs a single ACH deposit to fund the entire batch of payments.</p>

<p>The alternative approach incurs an ACH deposit from the bank funding source for each individual payment.  Those who used this approach have reported incurring fees from their financial institutions for excessive ACH transactions, which inspired us to build the <em>Single Deposit</em> feature.</p>

<h2 id="create-job">Create Job</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"fundsSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"76fe6c3ff2417eb02a9019c25c9a259d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userJobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some ID"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"assumeCosts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">140.52</span><span class="p">,</span><span class="w">
        </span><span class="s2">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-713-9234"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.00</span><span class="p">,</span><span class="w">
        </span><span class="s2">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reflector@dwolla.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"destinationType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"here's some money!"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
        </span><span class="p">}</span><span class="w"> 
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w"> 
</span></pre>

<blockquote>
<p>Response: </p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47fe2f7c-8d6d-4f98-bcd9-a3100178062f"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"UserJobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testjob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"AssumeCosts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"FundingSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Balance"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Total"</span><span class="p">:</span><span class="w"> </span><span class="mf">240.52</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Fees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CreatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-04-18T05:49:03Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queued"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ItemSummary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Completed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Successful"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Create a new MassPay job.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Send</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/masspay/</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Param</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fundsSource</td>
<td>no</td>
<td>ID of <a href="#funding-sources">funding source</a> from which to fund the payments</td>
</tr>
<tr>
<td>pin</td>
<td>no</td>
<td>User account PIN</td>
</tr>
<tr>
<td>items</td>
<td>no</td>
<td>An array of <code class="prettyprint">Item</code> objects.  See below.</td>
</tr>
<tr>
<td>userJobId</td>
<td>yes</td>
<td>An optional custom identifer for this job</td>
</tr>
<tr>
<td>assumeCosts</td>
<td>yes</td>
<td>If <code class="prettyprint">true</code>, the sender will assume the $0.25 Dwolla fee for each payment, if applicable.  Defaults to <code class="prettyprint">false</code>.</td>
</tr>
</tbody></table>

<h3 id="items">Items</h3>

<p>Each payment to be created in a MassPay job is represented as a JSON object with the following properties:</p>

<table><thead>
<tr>
<th>Param</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>no</td>
<td>Payment amount</td>
</tr>
<tr>
<td>destination</td>
<td>no</td>
<td>Payment destination.  Can be a Dwolla ID or email address.</td>
</tr>
<tr>
<td>destinationType</td>
<td>yes</td>
<td>If the destination is an email address, set this to <code class="prettyprint">Email</code>.  Otherwise, defaults to <code class="prettyprint">Dwolla</code>.</td>
</tr>
<tr>
<td>notes</td>
<td>yes</td>
<td>A note to attach to the payment.  Max 255 characters.</td>
</tr>
<tr>
<td>metadata</td>
<td>yes</td>
<td>An optional <a href="#metadata">metadata</a> object.</td>
</tr>
</tbody></table>

<h2 id="list-jobs">List Jobs</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"643f2db9-5b45-4755-a881-a3100178b6d7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"UserJobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I've got a job for ya"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"AssumeCosts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"FundingSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Balance"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Fees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"CreatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-04-18T05:51:34Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ItemSummary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Completed"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Successful"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"634de23d-ab50-4a53-bcd2-a310017794a8"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"UserJobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I've got another job for ya"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"AssumeCosts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"FundingSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Balance"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Fees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"CreatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-04-18T05:47:26Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ItemSummary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Completed"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Successful"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>List a user&rsquo;s existing MassPay jobs.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Transactions</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/masspay/</code></p>

<table><thead>
<tr>
<th>Optional Param</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>Retrieve up to <code class="prettyprint">limit</code> number of results</td>
</tr>
<tr>
<td>skip</td>
<td>Pagination marker.  Start retrieving results after <code class="prettyprint">skip</code> number of elements in the set of results.</td>
</tr>
</tbody></table>

<p>You can optionally provide the <code class="prettyprint">skip</code> and <code class="prettyprint">limit</code> querystring parameters to limit the number of results returned, and to offset the results by <code class="prettyprint">skip</code> number of items.  For example, to retrieve the first 20 results after the first 5 in the set of results:</p>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/masspay/?limit=20&amp;skip=5</code></p>

<h2 id="retrieve-job">Retrieve Job</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"643f2db9-5b45-4755-a881-a3100178b6d7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"UserJobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"somejob"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"AssumeCosts"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"FundingSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Balance"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Total"</span><span class="p">:</span><span class="w"> </span><span class="mf">240.52</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Fees"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CreatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-04-18T05:51:34Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"complete"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ItemSummary"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Completed"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Successful"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Look up a particular MassPay job by its ID.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Transactions</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/masspay/{id}</code></p>

<h2 id="list-a-job&#39;s-items">List a Job&rsquo;s Items</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"JobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"643f2db9-5b45-4755-a881-a3100178b6d7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ItemId"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reflector@dwolla.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DestinationType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"TransactionId"</span><span class="p">:</span><span class="w"> </span><span class="mi">4938766</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Error"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"CreatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-04-18T05:51:34Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"some meta data"</span><span class="p">:</span><span class="w">  </span><span class="s2">"hello world!"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"profound realization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cats"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"JobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"643f2db9-5b45-4755-a881-a3100178b6d7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ItemId"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-713-9234"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DestinationType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"TransactionId"</span><span class="p">:</span><span class="w"> </span><span class="mi">4938768</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Error"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"CreatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-04-18T05:51:34Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w"> 
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Retrieve the items for a particular MassPay job.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Transactions</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/masspay/{id}/items</code></p>

<table><thead>
<tr>
<th>Optional Param</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>Retrieve up to <code class="prettyprint">limit</code> number of results</td>
</tr>
<tr>
<td>skip</td>
<td>Pagination marker.  Start retrieving results after <code class="prettyprint">skip</code> number of elements in the set of results.</td>
</tr>
</tbody></table>

<p>You can optionally provide the <code class="prettyprint">skip</code> and <code class="prettyprint">limit</code> querystring parameters to limit the number of results returned, and to offset the results by <code class="prettyprint">skip</code> number of items.  For example, to retrieve the first 20 results after the first 5 in the set of results:</p>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/masspay/{id}/items?limit=20&amp;skip=5</code></p>

<h2 id="retrieve-a-job&#39;s-item">Retrieve a Job&rsquo;s Item</h2>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"JobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"643f2db9-5b45-4755-a881-a3100178b6d7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ItemId"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-713-9234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DestinationType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dwolla"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"TransactionId"</span><span class="p">:</span><span class="w"> </span><span class="mi">4938768</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Error"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CreatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-04-18T05:51:34Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"some meta data"</span><span class="p">:</span><span class="w">  </span><span class="s2">"hello world!"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"profound realization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cats"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Retrieve a particular MassPay Job Item, by the Job ID and Item ID.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Transactions</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/masspay/{job_id}/items/{item_id}</code></p>

          <h1 id="refund">Refund</h1>
<pre class="highlight json"><span class="err">POST</span><span class="w"> </span><span class="err">/oauth/rest/transactions/refund</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">11.25</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fundsSource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Balance"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pin"</span><span class="p">:</span><span class="w"> </span><span class="mi">9999</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2427171</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<blockquote>
<p>Response: </p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"TransactionId"</span><span class="p">:</span><span class="w"> </span><span class="mi">8522</span><span class="p">,</span><span class="w">
        </span><span class="s2">"RefundDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-01-22T17:47:04Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Commercial, Non-Profit, and Government type accounts can refund payments that have been received.  There is no limit on the window of time in which a payment can be refunded.  Individual accounts currently cannot refund payments.</p>

<p>A refund creates a new transaction.  This transaction will not incur a $0.25 transaction fee.  The refund amount can be up to the total payment amount, plus any transaction fee assumed by the sender and any facilitator fees assumed by the sender.</p>

<p>The Refund API requires the <a href="#how-transactions-work"><em>Recipient&rsquo;s</em> Transaction ID</a> to be provided.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Send</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/transactions/refund</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Param</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fundsSource</td>
<td>no</td>
<td>ID of <a href="#funding-sources">funding source</a> from which to fund the payments</td>
</tr>
<tr>
<td>pin</td>
<td>no</td>
<td>User account PIN</td>
</tr>
<tr>
<td>transactionId</td>
<td>no</td>
<td><a href="#how-transactions-work"><em>Recipient&rsquo;s</em> Transaction ID</a> of the payment to be refunded.</td>
</tr>
<tr>
<td>notes</td>
<td>yes</td>
<td>Note to attach to the refund.  Visible to refunder and recipient of refund.  Max 255 chars.</td>
</tr>
<tr>
<td>metadata</td>
<td>yes</td>
<td>An optional <a href="#metadata">metadata</a> object.</td>
</tr>
</tbody></table>

<h3 id="response-parameters">Response Parameters</h3>

<table><thead>
<tr>
<th>Param</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>TransactionId</td>
<td>Transaction ID of the newly created refund payment</td>
</tr>
<tr>
<td>RefundDate</td>
<td>Timestamp when refund was created</td>
</tr>
<tr>
<td>Amount</td>
<td>Amount refunded</td>
</tr>
</tbody></table>

          <h1 id="money-requests">Money Requests</h1>
<pre class="highlight plaintext">    __  ___                      
   /  |/  /___  ____  ___  __  __
  / /|_/ / __ \/ __ \/ _ \/ / / /
 / /  / / /_/ / / / /  __/ /_/ / 
/_/  /_/\____/_/ /_/\___/\__, /  
                        /____/   
    ____                             __      
   / __ \___  ____ ___  _____  _____/ /______
  / /_/ / _ \/ __ `/ / / / _ \/ ___/ __/ ___/
 / _, _/  __/ /_/ / /_/ /  __(__  ) /_(__  ) 
/_/ |_|\___/\__, /\__,_/\___/____/\__/____/  
              /_/      
</pre>
<pre class="highlight plaintext">{
    "Id": 1636,
    "Source": {
        "Id": "812-742-8722",
        "Name": "Cafe Kubal",
        "Type": "Dwolla",
        "Image": "http://uat.dwolla.com/avatars/812-742-8722"
    },
    "Destination": {
        "Id": "812-742-3301",
        "Name": "Gordon Zheng",
        "Type": "Dwolla",
        "Image": "http://uat.dwolla.com/avatars/812-742-3301"
    },
    "Amount": 0.01,
    "Notes": "",
    "DateRequested": "2014-10-01T19:50:54Z",
    "Status": "Paid",
    "Transaction": {
        "RequestId": 1636,
        "Id": 335741,
        "Source": {
            "Id": "812-742-3301",
            "Name": "Gordon Zheng",
            "Type": "Dwolla",
            "Image": "http://uat.dwolla.com/avatars/812-742-3301"
        },
        "Destination": {
            "Id": "812-742-8722",
            "Name": "Cafe Kubal",
            "Type": "Dwolla",
            "Image": "http://uat.dwolla.com/avatars/812-742-8722"
        },
        "Amount": 0.01,
        "SentDate": "2014-10-01T19:51:52Z",
        "ClearingDate": "2014-10-01T19:51:52Z",
        "Status": "processed"
    },
    "CancelledBy": null,
    "DateCancelled": "",
    "SenderAssumeFee": false,
    "SenderAssumeAdditionalFees": false,
    "AdditionalFees": [],
    "Metadata": null
}
</pre>

<p>Money Requests are sent from a Dwolla user to another Dwolla user, phone number or email address.  A Money Request is essentially an invoice, requesting payment from the recipient of the request.</p>

<p>Money Requests can be fulfilled for the amount of the request or greater whenever the payer decides to do so.  When fulfilled, a RequestFulfilled webhook notification is sent.  Money Requests can also be cancelled by either the sender of the request or the recipient of the request.  When cancelled, a RequestCancelled webhook notification is sent.</p>

<p>Money requests do not expire.</p>

<h3 id="money-request-statuses">Money Request Statuses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Pending</td>
<td>Intitial state upon creation.  Not yet fulfilled.</td>
</tr>
<tr>
<td>Paid</td>
<td>Payer has fulfilled the request and a payment has been sent for the request amount or greater.</td>
</tr>
<tr>
<td>Cancelled</td>
<td>Request was cancelled by either payer or requester.</td>
</tr>
</tbody></table>

<h3 id="money-request-resource">Money Request Resource</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Id</td>
<td>Unique Request ID</td>
</tr>
<tr>
<td>Source</td>
<td>JSON object describing the requester: Dwolla ID, full name, user type (will always be <code class="prettyprint">Dwolla</code>, since only Dwolla user accounts can request money), and profile avatar URL</td>
</tr>
<tr>
<td>Destination</td>
<td>JSON object describing the payer: DestinationId (a Dwolla ID, email, or phone number), full name (if Dwolla account, otherwise, the email or phone number), user type, and profile avatar URL (<code class="prettyprint">null</code> if not a user yet)</td>
</tr>
<tr>
<td>Amount</td>
<td>Amount of funds requested</td>
</tr>
<tr>
<td>Notes</td>
<td>Optional notes attached to Money Request</td>
</tr>
<tr>
<td>DateRequested</td>
<td>Date and time when Money Request was created</td>
</tr>
<tr>
<td>Status</td>
<td>Status of Money Request.  <a href="#money-request-statuses">See statuses</a>.</td>
</tr>
<tr>
<td>Transaction</td>
<td>If fulfilled, a JSON object representing the resulting Transaction.  Otherwise, <code class="prettyprint">null</code>.</td>
</tr>
<tr>
<td>CancelledBy</td>
<td>If cancelled, a JSON object representing the user who cancelled the request.  Otherwise, <code class="prettyprint">null</code>.</td>
</tr>
<tr>
<td>DateCancelled</td>
<td>If cancelled, the date and time when the request was cancelled.  Otherwise, empty string: <code class="prettyprint">&quot;&quot;</code>.</td>
</tr>
<tr>
<td>SenderAssumeFee</td>
<td>Boolean.  <code class="prettyprint">true</code> if sender will assume the $0.25 transaction fee if applicable.</td>
</tr>
<tr>
<td>SenderAssumeAdditionalFees</td>
<td>Boolean.  <code class="prettyprint">true</code> if sender will assume all facilitator fees.</td>
</tr>
<tr>
<td>AdditionalFees</td>
<td>Any additional facilitator fees attached to the request.</td>
</tr>
<tr>
<td>Metadata</td>
<td>An optional <a href="#metadata">metadata</a> object.</td>
</tr>
</tbody></table>

<h2 id="create-money-request">Create Money Request</h2>
<pre class="highlight php">/**
 * EXAMPLE 1: 
 *   Request money ($1.00) to a Dwolla ID 
 **/
$requestId = $Dwolla-&gt;request('812-713-9234', 1.00);
if(!$requestId) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { echo("Request ID: {$requestId} \n"); }
</pre>
<pre class="highlight ruby"><span class="c1"># Example 1: Request 1.00 from a Dwolla ID</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="n">requests</span><span class="p">.</span><span class="nf">create</span><span class="p">({</span><span class="ss">:sourceId</span><span class="o">=&gt;</span> <span class="s1">'812-114-1111'</span><span class="p">,</span> <span class="ss">:amount</span><span class="o">=&gt;</span> <span class="s1">'1.00'</span><span class="p">})</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1:
      Initiate a money request
'''</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">request_funds</span><span class="p">(</span><span class="s">'1.00'</span><span class="p">,</span> <span class="s">'reflector@dwolla.com'</span><span class="p">,</span> <span class="n">_keys</span><span class="o">.</span><span class="n">pin</span><span class="p">,</span> <span class="n">source_type</span><span class="o">=</span><span class="s">'Email'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/***
 * Example 1:
 *
 * Request $5 from Source ID '812-111-1111'
 */</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="s1">'812-111-1111'</span><span class="p">,</span> <span class="s1">'5.00'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>

<blockquote>
<p>If successful, you&rsquo;ll receive this response:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="mi">996</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Send a Money Request from the authorized user to a destination Dwolla user, email address or phone number.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Request</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/requests/</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sourceId</td>
<td>no</td>
<td>ID of user to request funds from. Must be either a Dwolla ID, phone number, or email address.</td>
</tr>
<tr>
<td>amount</td>
<td>no</td>
<td>Amount of funds to request</td>
</tr>
<tr>
<td>sourceType</td>
<td>yes</td>
<td>Type of source user (either <code class="prettyprint">Dwolla</code>, <code class="prettyprint">Email</code> or <code class="prettyprint">Phone</code>).  Defaults to <code class="prettyprint">Dwolla</code>.</td>
</tr>
<tr>
<td>facilitatorAmount</td>
<td>yes</td>
<td>Amount of the facilitator feeto override. Only applicable if the facilitator fee feature is enabled for your API application. If set to 0, facilitator fee is disabled for transaction. Cannot exceed 50% of the <code class="prettyprint">amount</code>.</td>
</tr>
<tr>
<td>notes</td>
<td>yes</td>
<td>Note to attach to request (250 character limit).</td>
</tr>
<tr>
<td>senderAssumeCosts</td>
<td>yes</td>
<td>Set to <code class="prettyprint">true</code> if the fulfilling user is to assume the Dwolla fee. Defaults to <code class="prettyprint">false</code>; does not include facilitator fees.</td>
</tr>
<tr>
<td>senderAssumeAdditionalFees</td>
<td>yes</td>
<td>Set to <code class="prettyprint">true</code> if the fulfilling user is to assume all facilitator fees. Defaults to <code class="prettyprint">false</code>; does not include the Dwolla transaction fee.</td>
</tr>
<tr>
<td>additionalFees</td>
<td>yes</td>
<td>Array of additional facilitator fee objects.  <code class="prettyprint">[{&quot;destinationId&quot;: &quot;&quot;, &quot;amount&quot;: 0.01}, ...]</code></td>
</tr>
<tr>
<td>metadata</td>
<td>yes</td>
<td>Optional JSON object of a maximum of 10 key-value pairs (each key and value must be less than 255 characters).  <a href="#metadata">Read more</a></td>
</tr>
</tbody></table>

<h2 id="list-money-requests">List Money Requests</h2>
<pre class="highlight php">/**
 * EXAMPLE 1: 
 *   Get list of pending requests
 **/
$requests = $Dwolla-&gt;requests();
if(!$requests) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { print_r($requests); }
</pre>
<pre class="highlight ruby"><span class="c1"># Example 1: Get all pending requests</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="n">requests</span><span class="p">.</span><span class="nf">get</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1:
      Get a list of pending requests
      for the user with the given oauth token
'''</span>
<span class="n">pending_requests</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">get_pending_requests</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">pending_requests</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/***
 * Example 1:
 *
 * List pending money requests for the user associated with the
 * OAuth token
 */</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">requests</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>

<blockquote>
<p>If successful, you&rsquo;ll receive this response:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-693-9484"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spencer Hunter"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-706-1396"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane Doe"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DateRequested"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-07-23T21:49:06Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pending"</span><span class="w"> </span><span class="p">,</span><span class="w">
            </span><span class="s2">"Transaction"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"CancelledBy"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"DateCancelled"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"SenderAssumeFee"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"SenderAssumeAdditionalFees"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"AdditionalFees"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w"> 
        </span><span class="p">},</span><span class="w">

        </span><span class="err">...</span><span class="w">

    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>List the authorized user&rsquo;s pending requests.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Request</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/requests/</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>startDate</td>
<td>yes</td>
<td>Earliest date and time for which to retrieve pending requests (defaults to 0300 UTC for current day)</td>
</tr>
<tr>
<td>endDate</td>
<td>yes</td>
<td>Latest date and time for which to retrieve pending requests (defaults to UTC current date/time)</td>
</tr>
<tr>
<td>limit</td>
<td>yes</td>
<td>Number of pending requests to retrieve (defaults to 20, must be in range of 1-200)</td>
</tr>
</tbody></table>

<h2 id="retrieve-money-request">Retrieve Money Request</h2>
<pre class="highlight php">/**
 * EXAMPLE 1: 
 *   Get request by ID
 **/
$request = $Dwolla-&gt;requestById($requestId);
if(!$request) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { print_r($request); }
</pre>
<pre class="highlight ruby"><span class="c1"># Example 1: Get request details for request '12345'</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'12345'</span><span class="p">)</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1:
      Get detailed information for the request
      with the given 'request_id'
'''</span>
<span class="n">request_id</span> <span class="o">=</span> <span class="s">'2209516'</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">get_request</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/***
 * Example 1:
 *
 * Fetch detailed information about a money request by specific id '12345678'
 */</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">requestById</span><span class="p">(</span><span class="s1">'12345678'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>

<blockquote>
<p>If successful, you&rsquo;ll receive this response:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="mi">660</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-693-9484"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spencer Hunter"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-706-1396"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane Doe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DateRequested"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-07-25T17:38:26Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pending"</span><span class="w"> </span><span class="p">,</span><span class="w">
        </span><span class="s2">"Transaction"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"CancelledBy"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"DateCancelled"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"SenderAssumeFee"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"SenderAssumeAdditionalFees"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"AdditionalFees"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"InvoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12-06-2014"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Priority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"High"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"TShirtSize"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Small"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"blah"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blah"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Retrieve a single Money Request by its ID.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Request</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/requests/{id}</code></p>

<h2 id="fulfill-money-request">Fulfill Money Request</h2>
<pre class="highlight php">/**
 * EXAMPLE 1: 
 *   Fulfill request with ID
 **/
$fulfilledRequest = $Dwolla-&gt;fulfillRequest($requestId, $pin);
if(!$fulfilledRequest) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { print_r($fulfilledRequest); }
</pre>
<pre class="highlight ruby"><span class="c1"># Example 1: Fulfill a request to ID 12345 of amount 1.00</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="n">requests</span><span class="p">.</span><span class="nf">fulfill</span><span class="p">(</span><span class="s1">'12345'</span><span class="p">,</span> <span class="p">{</span><span class="ss">:pin</span> <span class="o">=&gt;</span><span class="p">:</span> <span class="s1">'1234'</span><span class="p">,</span> <span class="ss">:amount</span> <span class="o">=&gt;</span> <span class="s1">'1.00'</span><span class="p">})</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1:
      Fulfill (:pay) a pending payment request
'''</span>
<span class="n">request_id</span> <span class="o">=</span> <span class="s">'2214710'</span>
<span class="n">fulfilled_request</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">fulfill_request</span><span class="p">(</span><span class="n">request_id</span><span class="p">,</span> <span class="n">_keys</span><span class="o">.</span><span class="n">pin</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">fulfilled</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/***
 * Example 1:
 *
 * Fulfill money request '12345678' of amount '10.00'
 */</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">fulfillRequest</span><span class="p">(</span><span class="nx">cfg</span><span class="p">.</span><span class="nx">pin</span><span class="p">,</span> <span class="s1">'12345678'</span><span class="p">,</span> <span class="s1">'10.00'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>

<blockquote>
<p>If successful, you&rsquo;ll receive this response:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="mi">147659</span><span class="p">,</span><span class="w">
        </span><span class="s2">"RequestId"</span><span class="p">:</span><span class="w"> </span><span class="mi">999</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"SentDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-01-22T13:11:10Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ClearingDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-01-22T13:11:10Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"processed"</span><span class="w"> </span><span class="p">,</span><span class="w">
        </span><span class="s2">"Source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-693-9484"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Michael Schonfeld"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"Destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"812-600-6705"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Michael Schonfeld"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dwolla"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"Image"</span><span class="p">:</span><span class="w"> </span><span class="err">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p>Fulfill an authorized user&rsquo;s pending money request.  Request must have a status of <code class="prettyprint">Pending</code>.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Request</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/requests/{request_id}/fulfill</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Optional?</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pin</td>
<td>no</td>
<td>The authorized user&rsquo;s PIN.</td>
</tr>
<tr>
<td>amount</td>
<td>no</td>
<td>Amount to pay for request (must be greater than or equal to the request amount).</td>
</tr>
<tr>
<td>notes</td>
<td>yes</td>
<td>Note to attach to transaction (250 character limit).</td>
</tr>
<tr>
<td>fundsSource</td>
<td>yes</td>
<td>ID of funding source to use for transaction (defaults to <code class="prettyprint">Balance</code>).</td>
</tr>
<tr>
<td>assumeCosts</td>
<td>yes</td>
<td>Set to <code class="prettyprint">true</code> for the fulfilling user to assume the Dwolla fee, <code class="prettyprint">false</code> for the destination user to assume the fee.</td>
</tr>
<tr>
<td>metadata</td>
<td>yes</td>
<td>An optional <a href="#metadata">metadata</a> object.</td>
</tr>
</tbody></table>

<h2 id="cancel-a-money-request">Cancel a Money Request</h2>

<p>Cancel a money request which the authorized user created or received.  Request must have a status of <code class="prettyprint">Pending</code>.</p>
<pre class="highlight php">/**
 * EXAMPLE 1: 
 *   Cancel request with ID
 **/
$canceledRequest = $Dwolla-&gt;cancelRequest($requestId);
if(!$canceledRequest) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { echo("Canceled? {$canceledRequest} \n"); }
</pre>
<pre class="highlight ruby"><span class="c1"># Example 1: Cancel request with ID '12345'</span>
<span class="n">pp</span> <span class="no">Dwolla</span><span class="o">::</span><span class="n">requests</span><span class="p">.</span><span class="nf">cancel</span><span class="p">(</span><span class="s1">'12345'</span><span class="p">)</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1:
      Cancel a pending money request
'''</span>
<span class="n">request_id</span> <span class="o">=</span> <span class="n">request</span>
<span class="n">canceled_request</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">cancel_request</span><span class="p">(</span><span class="n">request_id</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">canceled_request</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/***
 * Example 1:
 *
 * Cancel money request with ID '12345678'
 */</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">cancelRequest</span><span class="p">(</span><span class="s1">'12345678'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
   <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>

<blockquote>
<p>If successful, you&rsquo;ll recieve this response:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w">
    </span><span class="s2">"Success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Response"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">Request</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/requests/{request_id}/cancel</code></p>

          <h1 id="account-settings">Account Settings</h1>

<p>With the <code class="prettyprint">ManageAccount</code> OAuth scope, you can set and retrieve a user&rsquo;s account preferences.  </p>

<p>Currently, the only account feature you can enable or disable for a user via the API is Auto Withdrawal.  When Auto Withdrawal is enabled for a user, any payments received by the user will be automatically withdrawn to a bank funding source of their choice.</p>

<h2 id="retrieve-auto-withdrawal-status">Retrieve Auto Withdrawal Status</h2>
<pre class="highlight php">/**
 * Example 1:
 * Get autowithdrawal status for the 
 * account associted with the OAuth token
 */

$status = $Dwolla-&gt;getAutoWithdrawalStatus();
if(!$status) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { print_r($status); } // Print status
</pre>
<pre class="highlight ruby"><span class="c1"># EXAMPLE 1:</span>
<span class="c1">#   Get autowithdrawal status of the user</span>
<span class="c1">#   associated with the current OAuth token</span>

<span class="n">pp</span> <span class="no">Dwolla</span><span class="p">.</span><span class="nf">get_autowithdrawal_status</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1: 
        Fetch autowithdraw status for the account
        associated with the current OAuth token.
'''</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">get_autowithdraw_status</span>
<span class="k">print</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/***
 * Example 1:
 *
 * Find out whether or not auto-withdrawal is enabled for the user
 * associated with the OAuth token
 */</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">getAutoWithdrawalStatus</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>

<blockquote>
<p>If disabled:</p>
</blockquote>
<pre class="highlight plaintext">{
    "Success": true,
    "Message": "Success",
    "Response": "Disabled"
}
</pre>

<p>Determine whether the Auto Withdrawal is enabled for the authorized user.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">ManageAccount</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.dwolla.com/oauth/rest/accounts/features/auto_withdrawl</code></p>

<h2 id="set-auto-withdrawal-status">Set Auto Withdrawal Status</h2>
<pre class="highlight php">/**
 * Example 1:
 * Enable autowithdraw for funding source '12345' under the
 * account associted with the OAuth token
 */

$status = $Dwolla-&gt;toggleAutoWithdrawalStatus('true', '12345');
if(!$status) { echo "Error: {$Dwolla-&gt;getError()} \n"; } // Check for errors
else { print_r($status); } // Print status
</pre>
<pre class="highlight ruby"><span class="c1"># EXAMPLE 1:</span>
<span class="c1">#   Enable autowithdraw for funding source '12345' under the</span>
<span class="c1">#   associated with the current OAuth token</span>

<span class="n">pp</span> <span class="no">Dwolla</span><span class="p">.</span><span class="nf">auto_withdrawal</span><span class="p">(</span><span class="kp">true</span><span class="p">,</span> <span class="s1">'12345'</span><span class="p">)</span>
</pre>
<pre class="highlight python"><span class="s">'''
    EXAMPLE 1: 
        nable autowithdraw for funding source '12345' under the
        associated with the current OAuth token.
'''</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">DwollaUser</span><span class="o">.</span><span class="n">set_autowithdraw_status</span><span class="p">(</span><span class="n">true</span><span class="p">,</span> <span class="s">'12345'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</pre>
<pre class="highlight javascript"><span class="cm">/***
 * Example 1:
 *
 * Enable auto-withdraw for the user associated with the OAuth token,
 * for the funding ID '1234567'.
 */</span>

<span class="nx">Dwolla</span><span class="p">.</span><span class="nx">toggleAutoWithdraw</span><span class="p">(</span><span class="s1">'true'</span><span class="p">,</span> <span class="s1">'1234567'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</pre>

<blockquote>
<p>If enabled:</p>
</blockquote>
<pre class="highlight plaintext">{
    "Success": true,
    "Message": "Success",
    "Response": "Enabled"
}
</pre>

<p>Enable or disable Auto Withdrawal for the authorized user.</p>

<p><aside class="reminder">This endpoint <a href="#authentication">requires</a> an OAuth access token with the <code class="prettyprint">ManageAccount</code> scope.</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.dwolla.com/oauth/rest/accounts/features/auto_withdrawl</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>enabled</td>
<td>Boolean value of autowithdrawal feature.</td>
</tr>
<tr>
<td>fundingId</td>
<td><a href="#funding-sources">Funding source</a> ID of account to autowithdraw funds to.</td>
</tr>
</tbody></table>

          <h1 id="known-bugs">Known Bugs</h1>

<p>In an effort to remain transparent, here&rsquo;s a list of bugs we know about.</p>

          <h1 id="changelog">Changelog</h1>

<p>Track our changes on <a href="https://github.com/Dwolla/slate/commits/master">Github</a>!</p>

<table><thead>
<tr>
<th>Date</th>
<th>Changes</th>
</tr>
</thead><tbody>
<tr>
<td>10/15/2014</td>
<td>Initial docs + code samples written</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div id="lang-selector">
                <a href="#" data-language-name="json">json</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="js">node.js</a>
          </div>
      </div>
    </div>
  </body>
</html>
